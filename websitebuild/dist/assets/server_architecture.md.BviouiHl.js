import{_ as r,c as t,o as a,ag as o}from"./chunks/framework.C6A-W4Az.js";const n="/architecture.svg",p=JSON.parse('{"title":"Server Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"server/architecture.md","filePath":"server/architecture.md"}'),s={name:"server/architecture.md"};function i(c,e,l,u,h,d){return a(),t("div",null,[...e[0]||(e[0]=[o('<h1 id="server-architecture" tabindex="-1">Server Architecture <a class="header-anchor" href="#server-architecture" aria-label="Permalink to &quot;Server Architecture&quot;">​</a></h1><p>Queen uses a high-performance <strong>acceptor/worker pattern</strong> with fully asynchronous, non-blocking PostgreSQL architecture.</p><h2 id="core-components" tabindex="-1">Core Components <a class="header-anchor" href="#core-components" aria-label="Permalink to &quot;Core Components&quot;">​</a></h2><h3 id="network-layer" tabindex="-1">Network Layer <a class="header-anchor" href="#network-layer" aria-label="Permalink to &quot;Network Layer&quot;">​</a></h3><ul><li><strong>Acceptor</strong>: Single thread on port 6632, round-robin distribution</li><li><strong>Workers</strong>: 10 event loop threads (configurable via <code>NUM_WORKERS</code>)</li><li><strong>WebSocket</strong>: Real-time streaming support</li></ul><h3 id="database-layer" tabindex="-1">Database Layer <a class="header-anchor" href="#database-layer" aria-label="Permalink to &quot;Database Layer&quot;">​</a></h3><ul><li><strong>AsyncDbPool</strong>: 142 non-blocking PostgreSQL connections</li><li><strong>Non-blocking I/O</strong>: Socket-based with <code>select()</code></li><li><strong>RAII Management</strong>: Automatic connection cleanup</li></ul><h3 id="background-services" tabindex="-1">Background Services <a class="header-anchor" href="#background-services" aria-label="Permalink to &quot;Background Services&quot;">​</a></h3><ul><li><strong>Poll Workers</strong>: 4 threads for long-polling</li><li><strong>Background Pool</strong>: 8 connections for metrics/retention</li></ul><h2 id="request-flow" tabindex="-1">Request Flow <a class="header-anchor" href="#request-flow" aria-label="Permalink to &quot;Request Flow&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Client → Acceptor → Worker → AsyncQueueManager → AsyncDbPool → PostgreSQL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance" aria-label="Permalink to &quot;Performance&quot;">​</a></h2><ul><li><strong>Latency</strong>: 10-50ms (POP/ACK), 50-200ms (TRANSACTION)</li><li><strong>Throughput</strong>: 148,000+ msg/s peak, 130,000+ sustained</li><li><strong>Resources</strong>: 14 threads, 150 DB connections</li></ul><p><img src="'+n+'" alt="Architecture"></p><p><a href="https://github.com/smartpricing/queen/blob/master/docs/ARCHITECTURE.md" target="_blank" rel="noreferrer">Complete architecture documentation</a></p>',15)])])}const m=r(s,[["render",i]]);export{p as __pageData,m as default};
