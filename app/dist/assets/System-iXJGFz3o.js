import{g as M,M as X,c as T,k as be,a as r,b as t,d as C,n as m,F as k,i as y,A as Jt,B as Zt,t as l,e as L,N as tt,o,j as et,f as me}from"./index-Bh6pUXf_.js";import{u as ve}from"./useRefresh-DGHeVgd7.js";import{_ as $}from"./BaseChart-DXKMvTEU.js";const fe={class:"space-y-4 sm:space-y-6 animate-fade-in"},ke={class:"card p-3 sm:p-4"},ye={class:"flex flex-col gap-3"},_e={class:"flex flex-wrap items-center gap-2 sm:gap-4"},Ce={class:"flex items-center gap-1 sm:gap-2"},we={class:"flex items-center gap-1"},Se={key:0,class:"flex items-center gap-2"},De={class:"flex items-center gap-1"},Me={key:1,class:"flex items-center gap-2"},Te={class:"flex items-center gap-1"},Le=["onClick"],$e={key:2,class:"flex items-center gap-2 ml-auto"},Ee={class:"flex items-center gap-1"},Pe=["onClick"],Re={key:0,class:"flex flex-wrap items-center gap-3 pt-3 border-t border-light-200 dark:border-dark-50"},Ue={class:"flex items-center gap-2"},ze={class:"flex items-center gap-2"},Fe={key:0,class:"space-y-6"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},He={class:"card"},Ae={class:"card-header flex items-center justify-between"},Ne={class:"text-xs text-light-500"},Oe={class:"card-body"},je={class:"flex items-center gap-2 flex-wrap mb-4"},Qe=["onClick"],Ie={key:1,class:"text-center py-12 text-light-500"},Ve={class:"card"},We={class:"card-body"},qe={key:1,class:"text-center py-12 text-light-500"},Je={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},Ze={class:"card"},Ke={class:"card-body"},Ye={class:"flex items-center gap-2 flex-wrap mb-4"},Ge=["onClick"],Xe={key:1,class:"text-center py-12 text-light-500"},ts={class:"card"},es={class:"card-body"},ss={key:1,class:"text-center py-12 text-light-500"},as={class:"card"},ls={class:"card-header flex items-center justify-between"},os={key:0,class:"badge badge-danger"},rs={class:"card-body"},is={class:"flex items-center gap-2 flex-wrap mb-4"},ds=["onClick"],ns={key:1,class:"text-center py-12 text-light-500"},cs={key:0,class:"card"},us={class:"card-header flex items-center justify-between"},xs={class:"text-xs text-light-500"},gs={class:"card-body"},hs={class:"overflow-x-auto"},ps={class:"w-full text-sm"},bs={class:"px-3 py-2 font-medium"},ms={class:"px-3 py-2 text-light-600 dark:text-light-400"},vs={class:"px-3 py-2 text-right"},fs={class:"px-3 py-2 text-right"},ks={class:"px-3 py-2 text-right text-cyber-600 dark:text-cyber-400"},ys={class:"px-3 py-2 text-right"},_s={class:"px-3 py-2 text-right"},Cs={class:"px-3 py-2 text-xs text-light-500"},ws={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},Ss={class:"card"},Ds={class:"card-header flex items-center justify-between"},Ms={class:"text-xs text-light-500"},Ts={class:"card-body"},Ls={key:1,class:"text-center py-12 text-light-500"},$s={class:"card"},Es={class:"card-body"},Ps={key:1,class:"text-center py-12 text-light-500"},Rs={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},Us={class:"card"},zs={class:"card-body"},Fs={key:1,class:"text-center py-12 text-light-500"},Bs={class:"card"},Hs={class:"card-body"},As={key:1,class:"text-center py-12 text-light-500"},Ns={class:"card"},Os={class:"card-body"},js={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 sm:gap-4"},Qs={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},Is={class:"text-2xl font-bold text-light-900 dark:text-light-100 mt-1"},Vs={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},Ws={class:"text-2xl font-bold text-light-900 dark:text-light-100 mt-1"},qs={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},Js={class:"text-2xl font-bold text-light-900 dark:text-light-100 mt-1"},Zs={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},Ks={class:"text-2xl font-bold text-rose-600 dark:text-rose-400 mt-1"},Ys={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},Gs={class:"text-2xl font-bold text-purple-600 dark:text-purple-400 mt-1"},Xs={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},ta={class:"text-2xl font-bold text-light-900 dark:text-light-100 mt-1"},ea={key:0,class:"card"},sa={class:"card-body"},aa={class:"overflow-x-auto"},la={class:"w-full text-sm"},oa={class:"px-3 py-2 font-medium"},ra={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},ia={class:"px-3 py-2 text-right text-rose-600 dark:text-rose-400"},da={class:"px-3 py-2 text-right text-amber-600 dark:text-amber-400"},na={class:"px-3 py-2 text-right text-purple-600 dark:text-purple-400"},ca={class:"px-3 py-2 text-right"},ua={class:"card"},xa={class:"card-header flex items-center justify-between"},ga={class:"text-xs text-light-500"},ha={class:"card-body"},pa={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},ba={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},ma={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},va={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},fa={class:"p-4 bg-light-100 dark:bg-dark-300 rounded-lg"},ka={class:"text-2xl font-bold text-light-900 dark:text-light-100 mt-1"},ya={class:"card"},_a={class:"card-body"},Ca={class:"overflow-x-auto"},wa={class:"w-full text-sm"},Sa={class:"px-3 py-2 font-medium font-mono text-sm"},Da={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},Ma={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},Ta={class:"px-3 py-2 text-right"},La={class:"card"},$a={class:"card-body"},Ea={class:"overflow-x-auto"},Pa={class:"w-full text-sm"},Ra={class:"px-3 py-2 font-mono text-xs"},Ua={class:"px-3 py-2 text-light-600 dark:text-light-400"},za={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},Fa={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},Ba={class:"px-3 py-2 text-right"},Ha={key:0,class:"card"},Aa={class:"card-body"},Na={class:"overflow-x-auto"},Oa={class:"w-full text-sm"},ja={class:"px-3 py-2 font-mono text-sm"},Qa={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},Ia={class:"px-3 py-2 text-right"},Va={class:"flex items-center justify-end gap-2"},Wa={class:"w-16 h-2 bg-light-200 dark:bg-dark-200 rounded-full overflow-hidden"},qa={class:"text-xs text-light-600 dark:text-light-400 w-12 text-right"},Ja={class:"card"},Za={class:"card-body"},Ka={class:"overflow-x-auto"},Ya={class:"w-full text-sm"},Ga={class:"px-3 py-2 font-mono text-sm font-medium"},Xa={class:"px-3 py-2 text-right font-medium text-light-900 dark:text-light-100"},tl={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},el={class:"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400"},sl={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},al={class:"card"},ll={class:"card-header flex items-center justify-between"},ol={key:0,class:"badge badge-warning"},rl={class:"card-body"},il={key:0,class:"overflow-x-auto"},dl={class:"w-full text-sm"},nl={class:"px-3 py-2 font-mono text-xs"},cl={class:"px-3 py-2 text-right text-amber-600 dark:text-amber-400"},ul={class:"px-3 py-2 text-right"},xl={class:"px-3 py-2 text-xs text-light-500"},gl={key:1,class:"text-center py-8 text-light-500"},hl={class:"card"},pl={class:"card-body"},bl={key:0,class:"overflow-x-auto"},ml={class:"w-full text-sm"},vl={class:"px-3 py-2 font-mono text-xs"},fl={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},kl={class:"px-3 py-2 text-right"},yl={key:1,class:"text-center py-8 text-light-500"},_l={class:"card"},Cl={class:"card-header flex items-center justify-between"},wl={key:0,class:"badge badge-danger"},Sl={class:"card-body"},Dl={key:0,class:"space-y-3"},Ml={class:"flex items-center justify-between mb-2"},Tl={class:"text-xs font-medium text-light-600 dark:text-light-400"},Ll={class:"text-xs text-light-700 dark:text-light-300 block break-all"},$l={key:0,class:"mt-2 text-xs text-light-500"},El={key:1,class:"text-center py-8 text-emerald-600 dark:text-emerald-400"},Pl={key:1,class:"card"},Rl={class:"card-header flex items-center justify-between"},Ul={class:"badge badge-warning"},zl={class:"card-body"},Fl={class:"overflow-x-auto"},Bl={class:"w-full text-sm"},Hl={class:"px-3 py-2 font-mono text-sm"},Al={class:"px-3 py-2 text-right text-amber-600 dark:text-amber-400"},Nl={class:"px-3 py-2 text-right text-light-600 dark:text-light-400"},Ol={class:"px-3 py-2 text-xs text-light-500"},Wl={__name:"System",setup(jl){const K=M(!0),_=M("worker"),z=M("aggregate"),Q=M("avg"),Z=M(60),E=M(!1),F=M(""),B=M(""),f=M(null),v=M(null),g=M(null),Kt=[{label:"15m",value:15},{label:"1h",value:60},{label:"6h",value:360},{label:"24h",value:1440}],st=s=>{const e=s.getFullYear(),u=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),i=String(s.getHours()).padStart(2,"0"),d=String(s.getMinutes()).padStart(2,"0");return`${e}-${u}-${n}T${i}:${d}`},at=s=>s==null?"0ms":s<1e3?`${Math.round(s)}ms`:s<6e4?`${(s/1e3).toFixed(1)}s`:`${(s/6e4).toFixed(1)}m`,Yt=[{label:"Average",value:"avg"},{label:"Maximum",value:"max"},{label:"Minimum",value:"min"}],Gt=[{key:"push",label:"Push",activeClass:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",dotClass:"bg-orange-500"},{key:"pop",label:"Pop",activeClass:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300",dotClass:"bg-indigo-500"},{key:"ack",label:"Ack",activeClass:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300",dotClass:"bg-emerald-500"}],H=X({push:!0,pop:!0,ack:!0}),Xt=[{key:"avg",label:"Avg Event Loop",activeClass:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",dotClass:"bg-blue-500"},{key:"max",label:"Max Event Loop",activeClass:"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300",dotClass:"bg-rose-500"}],I=X({avg:!0,max:!0}),te=[{key:"dbErrors",label:"DB Errors",activeClass:"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300",dotClass:"bg-rose-500"},{key:"ackFailed",label:"Ack Failed",activeClass:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",dotClass:"bg-orange-500"},{key:"dlq",label:"DLQ",activeClass:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",dotClass:"bg-amber-500"}],A=X({dbErrors:!0,ackFailed:!0,dlq:!0}),lt={plugins:{legend:{display:!1},tooltip:{callbacks:{label:s=>` ${s.dataset.label}: ${at(s.parsed.y)}`}}},scales:{y:{beginAtZero:!0,min:0,title:{display:!0,text:"Latency",font:{size:11}},ticks:{callback:s=>at(s)}}}},ee={plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"Operations/s",font:{size:11}}}}},se={plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"CPU %",font:{size:11}},ticks:{callback:s=>s.toFixed(1)+"%"}}}},ae={plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"Memory (MB)",font:{size:11}}}}},ot={plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"Connections",font:{size:11}}}}},le={plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"Queue Size",font:{size:11}}}}},oe={plugins:{legend:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,min:0,title:{display:!0,text:"Errors",font:{size:11}}}}},re=s=>{H[s]=!H[s]},ie=s=>{I[s]=!I[s]},de=s=>{A[s]=!A[s]},ne=s=>{E.value=!1,Z.value=s,O()},ce=()=>{if(E.value=!E.value,E.value){const s=new Date,e=new Date(s.getTime()-Z.value*60*1e3);B.value=st(s),F.value=st(e)}},ue=()=>{if(!F.value||!B.value)return;const s=new Date(F.value),e=new Date(B.value);s>=e||O()},S=(s,e)=>e?s.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),D=s=>{if(!s||s.length<2)return!1;const e=new Date(s[0].timestamp),u=new Date(s[s.length-1].timestamp);return e.toDateString()!==u.toDateString()},Y=T(()=>{var e,u,n,i;if(!((u=(e=v.value)==null?void 0:e.replicas)!=null&&u.length))return null;const s=v.value.replicas[0];return(n=s==null?void 0:s.timeSeries)!=null&&n.length?(i=s.timeSeries[s.timeSeries.length-1])==null?void 0:i.metrics:null}),rt=T(()=>{var s,e;return(e=(s=f.value)==null?void 0:s.timeSeries)!=null&&e.length?f.value.timeSeries.reduce((u,n)=>u+(n.dbErrors||0)+(n.ackFailed||0)+(n.dlqCount||0),0):0}),it=T(()=>{var i,d;if(!((d=(i=f.value)==null?void 0:i.timeSeries)!=null&&d.length))return{labels:[],datasets:[]};const s=[...f.value.timeSeries].reverse(),e=D(s),u=s.map(c=>S(new Date(c.timestamp),e)),n=[];return H.push&&n.push({label:"Push/s",data:s.map(c=>c.pushPerSecond||0),borderColor:"rgba(255, 107, 0, 0.9)",backgroundColor:"rgba(255, 107, 0, 0.1)",fill:!0,tension:0}),H.pop&&n.push({label:"Pop/s",data:s.map(c=>c.popPerSecond||0),borderColor:"rgba(99, 102, 241, 0.9)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:0}),H.ack&&n.push({label:"Ack/s",data:s.map(c=>c.ackPerSecond||0),borderColor:"rgba(16, 185, 129, 0.9)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:0}),{labels:u,datasets:n}}),dt=T(()=>{var n,i;if(!((i=(n=f.value)==null?void 0:n.timeSeries)!=null&&i.length))return{labels:[],datasets:[]};const s=[...f.value.timeSeries].reverse(),e=D(s);return{labels:s.map(d=>S(new Date(d.timestamp),e)),datasets:[{label:"Avg Lag (ms)",data:s.map(d=>d.avgLagMs||0),borderColor:"rgba(139, 92, 246, 0.9)",fill:!1,tension:0},{label:"Max Lag (ms)",data:s.map(d=>d.maxLagMs||0),borderColor:"rgba(244, 63, 94, 0.9)",fill:!1,tension:0}]}}),nt=T(()=>{var i,d;if(!((d=(i=f.value)==null?void 0:i.timeSeries)!=null&&d.length))return{labels:[],datasets:[]};const s=[...f.value.timeSeries].reverse(),e=D(s),u=s.map(c=>S(new Date(c.timestamp),e)),n=[];return I.avg&&n.push({label:"Avg Event Loop (ms)",data:s.map(c=>c.avgEventLoopLagMs||0),borderColor:"rgba(59, 130, 246, 0.9)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:0}),I.max&&n.push({label:"Max Event Loop (ms)",data:s.map(c=>c.maxEventLoopLagMs||0),borderColor:"rgba(239, 68, 68, 0.9)",backgroundColor:"rgba(239, 68, 68, 0.05)",fill:!0,tension:0}),{labels:u,datasets:n}}),ct=T(()=>{var n,i;if(!((i=(n=f.value)==null?void 0:n.timeSeries)!=null&&i.length))return{labels:[],datasets:[]};const s=[...f.value.timeSeries].reverse(),e=D(s);return{labels:s.map(d=>S(new Date(d.timestamp),e)),datasets:[{label:"Free Slots",data:s.map(d=>d.avgFreeSlots||0),borderColor:"rgba(6, 182, 212, 0.9)",backgroundColor:"rgba(6, 182, 212, 0.1)",fill:!0,tension:0},{label:"DB Connections",data:s.map(d=>d.dbConnections||0),borderColor:"rgba(245, 158, 11, 0.9)",fill:!1,tension:0}]}}),ut=T(()=>{var i,d;if(!((d=(i=f.value)==null?void 0:i.timeSeries)!=null&&d.length))return{labels:[],datasets:[]};const s=[...f.value.timeSeries].reverse(),e=D(s),u=s.map(c=>S(new Date(c.timestamp),e)),n=[];return A.dbErrors&&n.push({label:"DB Errors",data:s.map(c=>c.dbErrors||0),backgroundColor:"rgba(239, 68, 68, 0.7)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:1}),A.ackFailed&&n.push({label:"Ack Failed",data:s.map(c=>c.ackFailed||0),backgroundColor:"rgba(255, 107, 0, 0.7)",borderColor:"rgba(255, 107, 0, 1)",borderWidth:1}),A.dlq&&n.push({label:"DLQ",data:s.map(c=>c.dlqCount||0),backgroundColor:"rgba(245, 158, 11, 0.7)",borderColor:"rgba(245, 158, 11, 1)",borderWidth:1}),{labels:u,datasets:n}}),xt=T(()=>{var e,u,n;if(!((u=(e=v.value)==null?void 0:e.replicas)!=null&&u.length))return{labels:[],datasets:[]};const s=Q.value;if(z.value==="individual"){const i=[],d=v.value.replicas[0],c=(d==null?void 0:d.timeSeries)||[],p=D(c),b=c.map(x=>S(new Date(x.timestamp),p)),h=["#f43f5e","#3b82f6","#10b981","#f59e0b","#8b5cf6"];return v.value.replicas.forEach((x,w)=>{const V=h[w%h.length];i.push({label:`${x.hostname} (User)`,data:(x.timeSeries||[]).map(W=>{var P,R,U;return(((U=(R=(P=W.metrics)==null?void 0:P.cpu)==null?void 0:R.user_us)==null?void 0:U[s])||0)/100}),borderColor:V,fill:!1,tension:0})}),{labels:b,datasets:i}}else{const i=((n=v.value.replicas[0])==null?void 0:n.timeSeries)||[],d=D(i);return{labels:i.map(p=>S(new Date(p.timestamp),d)),datasets:[{label:"User CPU (%)",data:i.map(p=>{var b,h,x;return(((x=(h=(b=p.metrics)==null?void 0:b.cpu)==null?void 0:h.user_us)==null?void 0:x[s])||0)/100}),borderColor:"rgba(244, 63, 94, 0.9)",backgroundColor:"rgba(244, 63, 94, 0.1)",fill:!0,tension:0},{label:"System CPU (%)",data:i.map(p=>{var b,h,x;return(((x=(h=(b=p.metrics)==null?void 0:b.cpu)==null?void 0:h.system_us)==null?void 0:x[s])||0)/100}),borderColor:"rgba(245, 158, 11, 0.9)",backgroundColor:"rgba(245, 158, 11, 0.1)",fill:!0,tension:0}]}}}),gt=T(()=>{var e,u,n;if(!((u=(e=v.value)==null?void 0:e.replicas)!=null&&u.length))return{labels:[],datasets:[]};const s=Q.value;if(z.value==="individual"){const i=[],d=v.value.replicas[0],c=(d==null?void 0:d.timeSeries)||[],p=D(c),b=c.map(x=>S(new Date(x.timestamp),p)),h=["#8b5cf6","#3b82f6","#10b981","#f59e0b","#f43f5e"];return v.value.replicas.forEach((x,w)=>{const V=h[w%h.length];i.push({label:x.hostname,data:(x.timeSeries||[]).map(W=>{var P,R,U;return Math.round((((U=(R=(P=W.metrics)==null?void 0:P.memory)==null?void 0:R.rss_bytes)==null?void 0:U[s])||0)/1024/1024)}),borderColor:V,fill:!1,tension:0})}),{labels:b,datasets:i}}else{const i=((n=v.value.replicas[0])==null?void 0:n.timeSeries)||[],d=D(i);return{labels:i.map(p=>S(new Date(p.timestamp),d)),datasets:[{label:"RSS (MB)",data:i.map(p=>{var b,h,x;return Math.round((((x=(h=(b=p.metrics)==null?void 0:b.memory)==null?void 0:h.rss_bytes)==null?void 0:x[s])||0)/1024/1024)}),borderColor:"rgba(139, 92, 246, 0.9)",backgroundColor:"rgba(139, 92, 246, 0.1)",fill:!0,tension:0}]}}}),ht=T(()=>{var i,d,c;if(!((d=(i=v.value)==null?void 0:i.replicas)!=null&&d.length))return{labels:[],datasets:[]};const s=Q.value,e=((c=v.value.replicas[0])==null?void 0:c.timeSeries)||[],u=D(e);return{labels:e.map(p=>S(new Date(p.timestamp),u)),datasets:[{label:"Active",data:e.map(p=>{var b,h,x;return((x=(h=(b=p.metrics)==null?void 0:b.database)==null?void 0:h.pool_active)==null?void 0:x[s])||0}),borderColor:"rgba(6, 182, 212, 0.9)",backgroundColor:"rgba(6, 182, 212, 0.1)",fill:!0,tension:0},{label:"Idle",data:e.map(p=>{var b,h,x;return((x=(h=(b=p.metrics)==null?void 0:b.database)==null?void 0:h.pool_idle)==null?void 0:x[s])||0}),borderColor:"rgba(16, 185, 129, 0.9)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:0}]}}),pt=T(()=>{var i,d,c;if(!((d=(i=v.value)==null?void 0:i.replicas)!=null&&d.length))return{labels:[],datasets:[]};const s=Q.value,e=((c=v.value.replicas[0])==null?void 0:c.timeSeries)||[],u=D(e);return{labels:e.map(p=>S(new Date(p.timestamp),u)),datasets:[{label:"DB Queue",data:e.map(p=>{var b,h,x,w;return((w=(x=(h=(b=p.metrics)==null?void 0:b.threadpool)==null?void 0:h.db)==null?void 0:x.queue_size)==null?void 0:w[s])||0}),borderColor:"rgba(99, 102, 241, 0.9)",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:0},{label:"System Queue",data:e.map(p=>{var b,h,x,w;return((w=(x=(h=(b=p.metrics)==null?void 0:b.threadpool)==null?void 0:h.system)==null?void 0:x.queue_size)==null?void 0:w[s])||0}),borderColor:"rgba(245, 158, 11, 0.9)",backgroundColor:"rgba(245, 158, 11, 0.1)",fill:!0,tension:0}]}}),G=s=>s==null?"0%":(s/100).toFixed(1)+"%",bt=s=>s==null?"0 MB":Math.round(s/1024/1024)+" MB",xe=s=>{if(!s||s===1)return"1 min";if(s<60)return`${s} min`;const e=Math.floor(s/60),u=s%60;return u===0?`${e}h`:`${e}h ${u}m`},ge=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",N=s=>s==null?"0":s>=1e12?(s/1e12).toFixed(2)+"T":s>=1e9?(s/1e9).toFixed(2)+"B":s>=1e6?(s/1e6).toFixed(2)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString(),mt=s=>{if(!s)return"Never";const e=new Date(s),n=new Date-e,i=Math.floor(n/6e4),d=Math.floor(n/36e5),c=Math.floor(n/864e5);return i<1?"Just now":i<60?`${i}m ago`:d<24?`${d}h ago`:c<7?`${c}d ago`:e.toLocaleDateString()},he=s=>s<60?`${s.toFixed(1)}s`:s<3600?`${Math.floor(s/60)}m ${Math.floor(s%60)}s`:`${Math.floor(s/3600)}h ${Math.floor(s%3600/60)}m`,q=s=>s==null?"text-light-500":s>=99?"text-emerald-600 dark:text-emerald-400":s>=95?"text-cyber-600 dark:text-cyber-400":s>=90?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400",pe=s=>s==null?"text-light-500":s>=95?"text-emerald-600 dark:text-emerald-400":s>=80?"text-cyber-600 dark:text-cyber-400":s>=50?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400",J=s=>{var e,u;return(e=s==null?void 0:s.timeSeries)!=null&&e.length?(u=s.timeSeries[s.timeSeries.length-1])==null?void 0:u.metrics:null},O=async()=>{(_.value==="postgres"?g.value:f.value||v.value)||(K.value=!0);try{if(_.value==="postgres"){const e=await tt.getPostgresStats();g.value=e.data}else{let e,u;if(E.value&&F.value&&B.value)e=new Date(F.value),u=new Date(B.value);else{const c=new Date;e=new Date(c.getTime()-Z.value*60*1e3),u=c}const n={from:e.toISOString(),to:u.toISOString()},[i,d]=await Promise.all([tt.getWorkerMetrics(n),tt.getSystemMetrics(n)]);f.value=i.data,v.value=d.data}}catch(e){console.error("Failed to fetch system metrics:",e)}finally{K.value=!1}};return ve(O),be(O),(s,e)=>{var u,n,i,d,c,p,b,h,x,w,V,W,P,R,U,vt,ft,kt,yt,_t,Ct,wt,St,Dt,Mt,Tt,Lt,$t,Et,Pt,Rt;return o(),r("div",fe,[t("div",ke,[t("div",ye,[t("div",_e,[t("div",Ce,[e[7]||(e[7]=t("span",{class:"text-[10px] sm:text-xs font-medium text-light-500"},"Source:",-1)),t("div",we,[t("button",{onClick:e[0]||(e[0]=a=>{_.value="worker",O()}),class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",_.value==="worker"?"bg-queen-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])}," Queue Operations ",2),t("button",{onClick:e[1]||(e[1]=a=>{_.value="system",O()}),class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",_.value==="system"?"bg-queen-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])}," System Resources ",2),t("button",{onClick:e[2]||(e[2]=a=>{_.value="postgres",O()}),class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",_.value==="postgres"?"bg-queen-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])}," Postgres Stats ",2)])]),_.value==="system"?(o(),r("div",Se,[e[8]||(e[8]=t("span",{class:"text-xs font-medium text-light-500"},"View:",-1)),t("div",De,[t("button",{onClick:e[3]||(e[3]=a=>z.value="individual"),class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",z.value==="individual"?"bg-indigo-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])}," Per Server ",2),t("button",{onClick:e[4]||(e[4]=a=>z.value="aggregate"),class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",z.value==="aggregate"?"bg-indigo-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])}," Aggregate ",2)])])):C("",!0),_.value==="system"?(o(),r("div",Me,[e[9]||(e[9]=t("span",{class:"text-xs font-medium text-light-500"},"Metric:",-1)),t("div",Te,[(o(),r(k,null,y(Yt,a=>t("button",{key:a.value,onClick:j=>Q.value=a.value,class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",Q.value===a.value?"bg-crown-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])},l(a.label),11,Le)),64))])])):C("",!0),_.value!=="postgres"?(o(),r("div",$e,[e[10]||(e[10]=t("span",{class:"text-xs font-medium text-light-500"},"Range:",-1)),t("div",Ee,[(o(),r(k,null,y(Kt,a=>t("button",{key:a.value,onClick:j=>ne(a.value),class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",Z.value===a.value&&!E.value?"bg-cyber-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])},l(a.label),11,Pe)),64)),t("button",{onClick:ce,class:m(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",E.value?"bg-cyber-500 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])}," Custom ",2)])])):C("",!0)]),E.value?(o(),r("div",Re,[t("div",Ue,[e[11]||(e[11]=t("label",{class:"text-xs font-medium text-light-600 dark:text-light-400 whitespace-nowrap"},"From:",-1)),Jt(t("input",{type:"datetime-local","onUpdate:modelValue":e[5]||(e[5]=a=>F.value=a),class:"input text-sm py-1.5 px-2 font-mono"},null,512),[[Zt,F.value]])]),t("div",ze,[e[12]||(e[12]=t("label",{class:"text-xs font-medium text-light-600 dark:text-light-400 whitespace-nowrap"},"To:",-1)),Jt(t("input",{type:"datetime-local","onUpdate:modelValue":e[6]||(e[6]=a=>B.value=a),class:"input text-sm py-1.5 px-2 font-mono"},null,512),[[Zt,B.value]])]),t("button",{onClick:ue,class:"btn btn-primary text-xs"}," Apply ")])):C("",!0)])]),K.value?(o(),r("div",Fe,[t("div",Be,[(o(),r(k,null,y(4,a=>t("div",{key:a,class:"card p-6"},[...e[13]||(e[13]=[t("div",{class:"skeleton h-48 w-full rounded-lg"},null,-1)])])),64))])])):_.value==="worker"&&f.value?(o(),r(k,{key:1},[t("div",He,[t("div",Ae,[e[14]||(e[14]=t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Message Throughput",-1)),t("span",Ne,l(f.value.pointCount||0)+" data points",1)]),t("div",Oe,[t("div",je,[(o(),r(k,null,y(Gt,a=>t("button",{key:a.key,onClick:j=>re(a.key),class:m(["flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded transition-colors",H[a.key]?a.activeClass:"bg-light-100 dark:bg-dark-300 text-light-600"])},[t("span",{class:m(["w-2 h-2 rounded-full",H[a.key]?a.dotClass:"bg-gray-400"])},null,2),et(" "+l(a.label),1)],10,Qe)),64))]),it.value.labels.length>0?(o(),L($,{key:0,type:"line",data:it.value,options:ee,height:"280px"},null,8,["data"])):(o(),r("div",Ie," No throughput data available "))])]),t("div",Ve,[e[15]||(e[15]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Message Latency"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Time from push to pop")],-1)),t("div",We,[dt.value.labels.length>0?(o(),L($,{key:0,type:"line",data:dt.value,options:lt,height:"240px"},null,8,["data"])):(o(),r("div",qe," No latency data available "))])]),t("div",Je,[t("div",Ze,[e[16]||(e[16]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Event Loop Latency")],-1)),t("div",Ke,[t("div",Ye,[(o(),r(k,null,y(Xt,a=>t("button",{key:a.key,onClick:j=>ie(a.key),class:m(["flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded transition-colors",I[a.key]?a.activeClass:"bg-light-100 dark:bg-dark-300 text-light-600"])},[t("span",{class:m(["w-2 h-2 rounded-full",I[a.key]?a.dotClass:"bg-gray-400"])},null,2),et(" "+l(a.label),1)],10,Ge)),64))]),nt.value.labels.length>0?(o(),L($,{key:0,type:"line",data:nt.value,options:lt,height:"200px"},null,8,["data"])):(o(),r("div",Xe," No event loop data available "))])]),t("div",ts,[e[17]||(e[17]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Connection Pool")],-1)),t("div",es,[ct.value.labels.length>0?(o(),L($,{key:0,type:"line",data:ct.value,options:ot,height:"200px"},null,8,["data"])):(o(),r("div",ss," No connection pool data available "))])])]),t("div",as,[t("div",ls,[e[18]||(e[18]=t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Errors",-1)),rt.value>0?(o(),r("span",os,l(rt.value)+" in period",1)):C("",!0)]),t("div",rs,[t("div",is,[(o(),r(k,null,y(te,a=>t("button",{key:a.key,onClick:j=>de(a.key),class:m(["flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded transition-colors",A[a.key]?a.activeClass:"bg-light-100 dark:bg-dark-300 text-light-600"])},[t("span",{class:m(["w-2 h-2 rounded-full",A[a.key]?a.dotClass:"bg-gray-400"])},null,2),et(" "+l(a.label),1)],10,ds)),64))]),ut.value.labels.length>0?(o(),L($,{key:0,type:"bar",data:ut.value,options:oe,height:"200px"},null,8,["data"])):(o(),r("div",ns," No error data available "))])]),(n=(u=f.value)==null?void 0:u.workers)!=null&&n.length?(o(),r("div",cs,[t("div",us,[e[19]||(e[19]=t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Workers Status",-1)),t("span",xs,l(f.value.workers.length)+" workers",1)]),t("div",gs,[t("div",hs,[t("table",ps,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Worker ID"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Hostname"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Avg EL"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Max EL"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Free Slots"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"DB Conn"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Job Queue"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Last Seen")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(f.value.workers,a=>(o(),r("tr",{key:a.workerId,class:"border-b border-light-100 dark:border-dark-100"},[t("td",bs,l(a.workerId),1),t("td",ms,l(a.hostname),1),t("td",vs,[t("span",{class:m(a.avgEventLoopLagMs>100?"text-amber-600 dark:text-amber-400":"")},l(a.avgEventLoopLagMs)+"ms ",3)]),t("td",fs,[t("span",{class:m(a.maxEventLoopLagMs>500?"text-rose-600 dark:text-rose-400":"")},l(a.maxEventLoopLagMs)+"ms ",3)]),t("td",ks,l(a.freeSlots),1),t("td",ys,l(a.dbConnections),1),t("td",_s,l(a.jobQueueSize),1),t("td",Cs,l(ge(a.lastSeen)),1)]))),128))])])])])])):C("",!0)],64)):_.value==="system"&&v.value?(o(),r(k,{key:2},[t("div",ws,[t("div",Ss,[t("div",Ds,[e[21]||(e[21]=t("h3",{class:"font-semibold text-light-900 dark:text-white"},"CPU Usage",-1)),t("span",Ms,l(v.value.replicaCount||0)+" replicas",1)]),t("div",Ts,[xt.value.labels.length>0?(o(),L($,{key:0,type:"line",data:xt.value,options:se,height:"240px"},null,8,["data"])):(o(),r("div",Ls," No CPU data available "))])]),t("div",$s,[e[22]||(e[22]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Memory Usage")],-1)),t("div",Es,[gt.value.labels.length>0?(o(),L($,{key:0,type:"line",data:gt.value,options:ae,height:"240px"},null,8,["data"])):(o(),r("div",Ps," No memory data available "))])])]),t("div",Rs,[t("div",Us,[e[23]||(e[23]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Database Pool")],-1)),t("div",zs,[ht.value.labels.length>0?(o(),L($,{key:0,type:"line",data:ht.value,options:ot,height:"200px"},null,8,["data"])):(o(),r("div",Fs," No database pool data available "))])]),t("div",Bs,[e[24]||(e[24]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Thread Pool")],-1)),t("div",Hs,[pt.value.labels.length>0?(o(),L($,{key:0,type:"line",data:pt.value,options:le,height:"200px"},null,8,["data"])):(o(),r("div",As," No thread pool data available "))])])]),t("div",Ns,[e[31]||(e[31]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"System Summary")],-1)),t("div",Os,[t("div",js,[t("div",Qs,[e[25]||(e[25]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Replicas",-1)),t("p",Is,l(v.value.replicaCount||0),1)]),t("div",Vs,[e[26]||(e[26]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Data Points",-1)),t("p",Ws,l(v.value.pointCount||0),1)]),t("div",qs,[e[27]||(e[27]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Bucket Size",-1)),t("p",Js,l(xe(v.value.bucketMinutes)),1)]),t("div",Zs,[e[28]||(e[28]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Latest CPU",-1)),t("p",Ks,l(G((c=(d=(i=Y.value)==null?void 0:i.cpu)==null?void 0:d.user_us)==null?void 0:c.last)),1)]),t("div",Ys,[e[29]||(e[29]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Latest Memory",-1)),t("p",Gs,l(bt((h=(b=(p=Y.value)==null?void 0:p.memory)==null?void 0:b.rss_bytes)==null?void 0:h.last)),1)]),t("div",Xs,[e[30]||(e[30]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"DB Active",-1)),t("p",ta,l(((V=(w=(x=Y.value)==null?void 0:x.database)==null?void 0:w.pool_active)==null?void 0:V.last)||0),1)])])])]),z.value==="individual"&&((P=(W=v.value)==null?void 0:W.replicas)==null?void 0:P.length)>1?(o(),r("div",ea,[e[33]||(e[33]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Server Details")],-1)),t("div",sa,[t("div",aa,[t("table",la,[e[32]||(e[32]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Hostname"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Port"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"CPU (User)"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"CPU (Sys)"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Memory"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"DB Pool")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(v.value.replicas,a=>{var j,Ut,zt,Ft,Bt,Ht,At,Nt,Ot,jt,Qt,It,Vt,Wt,qt;return o(),r("tr",{key:`${a.hostname}:${a.port}`,class:"border-b border-light-100 dark:border-dark-100"},[t("td",oa,l(a.hostname),1),t("td",ra,l(a.port),1),t("td",ia,l(G((zt=(Ut=(j=J(a))==null?void 0:j.cpu)==null?void 0:Ut.user_us)==null?void 0:zt.last)),1),t("td",da,l(G((Ht=(Bt=(Ft=J(a))==null?void 0:Ft.cpu)==null?void 0:Bt.system_us)==null?void 0:Ht.last)),1),t("td",na,l(bt((Ot=(Nt=(At=J(a))==null?void 0:At.memory)==null?void 0:Nt.rss_bytes)==null?void 0:Ot.last)),1),t("td",ca,l(((It=(Qt=(jt=J(a))==null?void 0:jt.database)==null?void 0:Qt.pool_active)==null?void 0:It.last)||0)+"/"+l(((qt=(Wt=(Vt=J(a))==null?void 0:Vt.database)==null?void 0:Wt.pool_size)==null?void 0:qt.last)||0),1)])}),128))])])])])])):C("",!0)],64)):_.value==="postgres"&&g.value?(o(),r(k,{key:3},[t("div",ua,[t("div",xa,[e[34]||(e[34]=t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Cache Performance",-1)),t("span",ga,l(g.value.database),1)]),t("div",ha,[t("div",pa,[t("div",ba,[e[35]||(e[35]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Database Hit Ratio",-1)),t("p",{class:m(["text-2xl font-bold mt-1",q((R=g.value.databaseCache)==null?void 0:R.cacheHitRatio)])},l(((U=g.value.databaseCache)==null?void 0:U.cacheHitRatio)||0)+"% ",3)]),t("div",ma,[e[36]||(e[36]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Table Hit Ratio",-1)),t("p",{class:m(["text-2xl font-bold mt-1",q((ft=(vt=g.value.cacheSummary)==null?void 0:vt.tables)==null?void 0:ft.hitRatio)])},l(((yt=(kt=g.value.cacheSummary)==null?void 0:kt.tables)==null?void 0:yt.hitRatio)||0)+"% ",3)]),t("div",va,[e[37]||(e[37]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Index Hit Ratio",-1)),t("p",{class:m(["text-2xl font-bold mt-1",q((Ct=(_t=g.value.cacheSummary)==null?void 0:_t.indexes)==null?void 0:Ct.hitRatio)])},l(((St=(wt=g.value.cacheSummary)==null?void 0:wt.indexes)==null?void 0:St.hitRatio)||0)+"% ",3)]),t("div",fa,[e[38]||(e[38]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Shared Buffers",-1)),t("p",ka,l(((Dt=g.value.bufferConfig)==null?void 0:Dt.sharedBuffersSize)||"N/A"),1)])])])]),t("div",ya,[e[40]||(e[40]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Table Cache Stats"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Cache hit ratios per table in queen schema")],-1)),t("div",_a,[t("div",Ca,[t("table",wa,[e[39]||(e[39]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Disk Reads"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Cache Hits"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Hit Ratio")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.tableCache,a=>(o(),r("tr",{key:a.table,class:"border-b border-light-100 dark:border-dark-100"},[t("td",Sa,l(a.table),1),t("td",Da,l(N(a.diskReads)),1),t("td",Ma,l(N(a.cacheHits)),1),t("td",Ta,[t("span",{class:m(q(a.cacheHitRatio))},l(a.cacheHitRatio||0)+"% ",3)])]))),128))])])])])]),t("div",La,[e[42]||(e[42]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Index Cache Stats"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Cache hit ratios per index (top 20 by disk reads)")],-1)),t("div",$a,[t("div",Ea,[t("table",Pa,[e[41]||(e[41]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Index"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Disk Reads"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Cache Hits"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Hit Ratio")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.indexCache,a=>(o(),r("tr",{key:a.index,class:"border-b border-light-100 dark:border-dark-100"},[t("td",Ra,l(a.index),1),t("td",Ua,l(a.table),1),t("td",za,l(N(a.diskReads)),1),t("td",Fa,l(N(a.cacheHits)),1),t("td",Ba,[t("span",{class:m(q(a.cacheHitRatio))},l(a.cacheHitRatio||0)+"% ",3)])]))),128))])])])])]),(Mt=g.value.bufferUsage)!=null&&Mt.length?(o(),r("div",Ha,[e[44]||(e[44]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Buffer Cache Contents"),t("p",{class:"text-xs text-light-500 mt-0.5"},"What's currently cached in shared_buffers")],-1)),t("div",Aa,[t("div",Na,[t("table",Oa,[e[43]||(e[43]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Object"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Buffered Size"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"% of Cache")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.bufferUsage,a=>(o(),r("tr",{key:a.object,class:"border-b border-light-100 dark:border-dark-100"},[t("td",ja,l(a.object),1),t("td",Qa,l(a.bufferedSize),1),t("td",Ia,[t("div",Va,[t("div",Wa,[t("div",{class:"h-full bg-indigo-500 rounded-full",style:me({width:`${Math.min(a.percentOfCache,100)}%`})},null,4)]),t("span",qa,l(a.percentOfCache)+"% ",1)])])]))),128))])])])])])):C("",!0),t("div",Ja,[e[46]||(e[46]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Table Sizes"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Storage usage per table")],-1)),t("div",Za,[t("div",Ka,[t("table",Ya,[e[45]||(e[45]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Total Size"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table Size"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Index Size")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.tableSizes,a=>(o(),r("tr",{key:a.table,class:"border-b border-light-100 dark:border-dark-100"},[t("td",Ga,l(a.table),1),t("td",Xa,l(a.totalSize),1),t("td",tl,l(a.tableSize),1),t("td",el,l(a.indexSize),1)]))),128))])])])])]),t("div",sl,[t("div",al,[t("div",ll,[e[47]||(e[47]=t("div",null,[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Dead Tuples"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Tables needing vacuum")],-1)),(Tt=g.value.deadTuples)!=null&&Tt.length?(o(),r("span",ol,l(g.value.deadTuples.length)+" tables ",1)):C("",!0)]),t("div",rl,[(Lt=g.value.deadTuples)!=null&&Lt.length?(o(),r("div",il,[t("table",dl,[e[48]||(e[48]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Dead"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Dead %"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Last Vacuum")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.deadTuples,a=>(o(),r("tr",{key:a.table,class:"border-b border-light-100 dark:border-dark-100"},[t("td",nl,l(a.table),1),t("td",cl,l(N(a.deadTuples)),1),t("td",ul,[t("span",{class:m(a.deadPercentage>10?"text-rose-600 dark:text-rose-400":"text-light-600 dark:text-light-400")},l(a.deadPercentage||0)+"% ",3)]),t("td",xl,l(mt(a.lastAutovacuum||a.lastVacuum)),1)]))),128))])])])):(o(),r("div",gl," No dead tuples - tables are clean! ✓ "))])]),t("div",hl,[e[50]||(e[50]=t("div",{class:"card-header"},[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"HOT Update Efficiency"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Heap-Only Tuple updates (higher is better)")],-1)),t("div",pl,[($t=g.value.hotUpdates)!=null&&$t.length?(o(),r("div",bl,[t("table",ml,[e[49]||(e[49]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Updates"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"HOT %")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.hotUpdates,a=>(o(),r("tr",{key:a.table,class:"border-b border-light-100 dark:border-dark-100"},[t("td",vl,l(a.table),1),t("td",fl,l(N(a.totalUpdates)),1),t("td",kl,[t("span",{class:m(pe(a.hotUpdatePercentage))},l(a.hotUpdatePercentage||0)+"% ",3)])]))),128))])])])):(o(),r("div",yl," No updates recorded yet "))])])]),t("div",_l,[t("div",Cl,[e[51]||(e[51]=t("div",null,[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Active Queries"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Queries running longer than 1 second")],-1)),(Et=g.value.activeQueries)!=null&&Et.length?(o(),r("span",wl,l(g.value.activeQueries.length)+" slow ",1)):C("",!0)]),t("div",Sl,[(Pt=g.value.activeQueries)!=null&&Pt.length?(o(),r("div",Dl,[(o(!0),r(k,null,y(g.value.activeQueries,a=>(o(),r("div",{key:a.pid,class:"p-3 bg-light-100 dark:bg-dark-300 rounded-lg"},[t("div",Ml,[t("span",Tl," PID: "+l(a.pid)+" · "+l(a.state),1),t("span",{class:m(["text-xs font-mono",a.duration>10?"text-rose-600 dark:text-rose-400":"text-amber-600 dark:text-amber-400"])},l(he(a.duration)),3)]),t("code",Ll,l(a.query),1),a.waitEventType?(o(),r("div",$l," Wait: "+l(a.waitEventType)+" / "+l(a.waitEvent),1)):C("",!0)]))),128))])):(o(),r("div",El," No slow queries running ✓ "))])]),(Rt=g.value.autovacuumStatus)!=null&&Rt.length?(o(),r("div",Pl,[t("div",Rl,[e[52]||(e[52]=t("div",null,[t("h3",{class:"font-semibold text-light-900 dark:text-white"},"Autovacuum Status"),t("p",{class:"text-xs text-light-500 mt-0.5"},"Tables with >1000 dead tuples")],-1)),t("span",Ul,l(g.value.autovacuumStatus.length)+" pending",1)]),t("div",zl,[t("div",Fl,[t("table",Bl,[e[53]||(e[53]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Table"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Dead Tuples"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Vacuum Count"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Last Autovacuum")])],-1)),t("tbody",null,[(o(!0),r(k,null,y(g.value.autovacuumStatus,a=>(o(),r("tr",{key:a.table,class:"border-b border-light-100 dark:border-dark-100"},[t("td",Hl,l(a.table),1),t("td",Al,l(N(a.deadTuples)),1),t("td",Nl,l(a.autovacuumCount),1),t("td",Ol,l(mt(a.lastAutovacuum)),1)]))),128))])])])])])):C("",!0)],64)):C("",!0)])}}};export{Wl as default};
