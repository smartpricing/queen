import{c as k,a as i,o as l,b as e,d as j,t as o,n as m,e as J,r as Re,f as Le,g as S,h as qe,u as z,F as A,i as N,j as H,w as Qe,k as He,l as Ue,m as O,p as V,q as Ge,s as Ke,v as Je,x as We,y as Xe,z as T}from"./index-Bh6pUXf_.js";import{f as L}from"./useApi-CMkbhU7m.js";import{u as Ye}from"./useRefresh-DGHeVgd7.js";import{_ as Ze}from"./BaseChart-DXKMvTEU.js";const et={class:"flex items-start justify-between"},tt={class:"metric-label"},st={key:0,class:"skeleton w-20 h-8"},at={key:1},nt={key:0,class:"text-xs text-light-500 dark:text-light-500 mt-1"},lt={key:0,class:"flex-shrink-0"},rt={key:0,class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ot={key:1,class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},it={key:0,class:"mt-4"},ut={class:"flex items-center justify-between text-xs text-light-500 mb-1"},dt={class:"h-1.5 bg-light-200 dark:bg-dark-100 rounded-full overflow-hidden"},Q={__name:"MetricCard",props:{label:{type:String,required:!0},value:{type:[Number,String],default:0},format:{type:String,default:"number"},subtext:{type:String,default:null},icon:{type:[Object,Function],default:null},iconColor:{type:String,default:"queen"},trend:{type:Number,default:null},progress:{type:Number,default:null},progressLabel:{type:String,default:"Progress"},progressColor:{type:String,default:"queen"},loading:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1}},emits:["click"],setup(a){const n=a,p=k(()=>{if(n.value===null||n.value===void 0)return"-";switch(n.format){case"number":return L(n.value);case"percent":return`${n.value}%`;case"duration":return n.value;default:return n.value}}),w=k(()=>{const x={queen:"text-queen-600 dark:text-queen-400",cyber:"text-cyber-600 dark:text-cyber-400",crown:"text-crown-600 dark:text-crown-400"};return n.iconColor?x[n.iconColor]:""}),v=k(()=>{const x={queen:"bg-queen-100 dark:bg-queen-500/20",cyber:"bg-cyber-100 dark:bg-cyber-500/20",crown:"bg-crown-100 dark:bg-crown-500/20"};return x[n.iconColor]||x.queen}),P=k(()=>{const x={queen:"text-queen-600 dark:text-queen-400",cyber:"text-cyber-600 dark:text-cyber-400",crown:"text-crown-600 dark:text-crown-400"};return x[n.iconColor]||x.queen}),y=k(()=>{const x={queen:"bg-gradient-to-r from-queen-500 to-queen-600",cyber:"bg-gradient-to-r from-cyber-500 to-cyber-600",crown:"bg-gradient-to-r from-crown-500 to-crown-600"};return x[n.progressColor]||x.queen});return(x,$)=>(l(),i("div",{class:m(["metric-card group cursor-pointer",{"hover:shadow-glow-queen":a.clickable}]),onClick:$[0]||($[0]=F=>x.$emit("click"))},[e("div",et,[e("div",null,[e("p",tt,o(a.label),1),e("p",{class:m(["metric-value mt-1",w.value])},[a.loading?(l(),i("span",st)):(l(),i("span",at,o(p.value),1))],2),a.subtext?(l(),i("p",nt,o(a.subtext),1)):j("",!0)]),a.icon||a.trend!==null?(l(),i("div",lt,[a.icon?(l(),i("div",{key:0,class:m(["w-12 h-12 rounded-xl flex items-center justify-center",v.value])},[(l(),J(Re(a.icon),{class:m(["w-6 h-6",P.value])},null,8,["class"]))],2)):a.trend!==null?(l(),i("div",{key:1,class:m(["flex items-center gap-1 metric-change",a.trend>=0?"metric-change-up":"metric-change-down"])},[a.trend>=0?(l(),i("svg",rt,[...$[1]||($[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 11l5-5m0 0l5 5m-5-5v12"},null,-1)])])):(l(),i("svg",ot,[...$[2]||($[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 13l-5 5m0 0l-5-5m5 5V6"},null,-1)])])),e("span",null,o(Math.abs(a.trend))+"%",1)],2)):j("",!0)])):j("",!0)]),a.progress!==null?(l(),i("div",it,[e("div",ut,[e("span",null,o(a.progressLabel),1),e("span",null,o(a.progress)+"%",1)]),e("div",dt,[e("div",{class:m(["h-full rounded-full transition-all duration-500",y.value]),style:Le({width:`${a.progress}%`})},null,6)])])):j("",!0)],2))}},ct={class:"card overflow-hidden"},gt={key:0,class:"card-header flex items-center justify-between"},mt={class:"flex items-center gap-3"},ht={key:0,class:"font-semibold text-light-900 dark:text-white"},vt={key:1,class:"badge badge-queen"},ft={class:"table-container"},pt={class:"table"},xt=["onClick"],bt=["onClick"],kt={key:2},yt=["colspan"],wt={class:"text-light-500 dark:text-light-500"},$t={class:"text-sm"},Ct={key:1,class:"px-5 py-4 border-t border-light-200 dark:border-dark-50 flex items-center justify-between"},St={class:"text-sm text-light-600 dark:text-light-400"},Mt={class:"flex items-center gap-2"},_t=["disabled"],qt=["disabled"],Be={__name:"DataTable",props:{columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},title:{type:String,default:null},total:{type:Number,default:null},loading:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},pagination:{type:Boolean,default:!0},pageSize:{type:Number,default:10},emptyText:{type:String,default:"No data available"},defaultSort:{type:String,default:null},defaultSortOrder:{type:String,default:"asc"}},emits:["row-click"],setup(a){const n=a,p=S(1),w=S(n.defaultSort),v=S(n.defaultSortOrder),P=(f,b)=>b.split(".").reduce((c,q)=>c==null?void 0:c[q],f),y=k(()=>w.value?[...n.data].sort((f,b)=>{const c=P(f,w.value),q=P(b,w.value);if(c===q)return 0;const M=c<q?-1:1;return v.value==="asc"?M:-M}):n.data),x=k(()=>Math.ceil(y.value.length/n.pageSize)),$=k(()=>{if(!n.pagination)return y.value;const f=(p.value-1)*n.pageSize;return y.value.slice(f,f+n.pageSize)}),F=f=>{w.value===f?v.value=v.value==="asc"?"desc":"asc":(w.value=f,v.value="asc"),p.value=1};return(f,b)=>(l(),i("div",ct,[a.title||f.$slots.header?(l(),i("div",gt,[e("div",mt,[a.title?(l(),i("h3",ht,o(a.title),1)):j("",!0),a.total?(l(),i("span",vt,o(z(L)(a.total))+" total ",1)):j("",!0)]),qe(f.$slots,"header")])):j("",!0),e("div",ft,[e("table",pt,[e("thead",null,[e("tr",null,[(l(!0),i(A,null,N(a.columns,c=>(l(),i("th",{key:c.key,class:m([c.align==="right"?"text-right":"",c.sortable?"cursor-pointer hover:text-queen-600 dark:hover:text-queen-400 select-none":""]),onClick:q=>c.sortable&&F(c.key)},[e("div",{class:m(["flex items-center gap-1.5",{"justify-end":c.align==="right"}])},[H(o(c.label)+" ",1),c.sortable&&w.value===c.key?(l(),i("svg",{key:0,class:m(["w-3.5 h-3.5 transition-transform",{"rotate-180":v.value==="desc"}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...b[2]||(b[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 15l7-7 7 7"},null,-1)])],2)):j("",!0)],2)],10,xt))),128))])]),e("tbody",null,[a.loading?(l(),i(A,{key:0},N(5,c=>e("tr",{key:c},[(l(!0),i(A,null,N(a.columns,q=>(l(),i("td",{key:q.key},[...b[3]||(b[3]=[e("div",{class:"skeleton h-4 w-24"},null,-1)])]))),128))])),64)):y.value.length>0?(l(!0),i(A,{key:1},N($.value,(c,q)=>(l(),i("tr",{key:c.id||q,class:m(["transition-colors",{"cursor-pointer":a.clickable}]),onClick:M=>a.clickable&&f.$emit("row-click",c)},[(l(!0),i(A,null,N(a.columns,M=>(l(),i("td",{key:M.key,class:m(M.align==="right"?"text-right":"")},[qe(f.$slots,M.key,{row:c,value:P(c,M.key)},()=>[H(o(P(c,M.key)),1)])],2))),128))],10,bt))),128)):(l(),i("tr",kt,[e("td",{colspan:a.columns.length,class:"text-center py-12"},[e("div",wt,[b[4]||(b[4]=e("svg",{class:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e("p",$t,o(a.emptyText),1)])],8,yt)]))])])]),a.pagination&&y.value.length>a.pageSize?(l(),i("div",Ct,[e("p",St," Showing "+o((p.value-1)*a.pageSize+1)+" to "+o(Math.min(p.value*a.pageSize,y.value.length))+" of "+o(y.value.length),1),e("div",Mt,[e("button",{onClick:b[0]||(b[0]=c=>p.value--),disabled:p.value===1,class:"btn btn-secondary px-3 py-1.5 text-sm disabled:opacity-50"}," Previous ",8,_t),e("button",{onClick:b[1]||(b[1]=c=>p.value++),disabled:p.value>=x.value,class:"btn btn-secondary px-3 py-1.5 text-sm disabled:opacity-50"}," Next ",8,qt)])])):j("",!0)]))}},Bt={class:"space-y-4 sm:space-y-6 animate-fade-in"},Lt={class:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-5"},jt={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3"},Dt={class:"card px-3 py-2"},zt={class:"flex items-center justify-between"},Pt={class:"flex items-center gap-3 text-xs"},Vt={class:"card px-3 py-2"},At={class:"flex items-center justify-between"},Nt={class:"flex items-center gap-3 text-xs"},Ft={class:"card px-3 py-2"},Ot={class:"flex items-center justify-between"},Tt={class:"flex items-center gap-3 text-xs"},It={class:"card px-3 py-2"},Et={class:"flex items-center justify-between"},Rt={class:"flex items-center gap-2 text-xs"},Qt={class:"font-semibold text-emerald-600 dark:text-emerald-400 tabular-nums"},Ht={class:"font-semibold text-indigo-600 dark:text-indigo-400 tabular-nums"},Ut={class:"font-semibold text-green-600 dark:text-green-400 tabular-nums"},Gt={class:"grid grid-cols-1 lg:grid-cols-3 gap-3 sm:gap-5"},Kt={class:"lg:col-span-2 card"},Jt={class:"card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},Wt={class:"flex items-center gap-1 sm:gap-2"},Xt=["onClick"],Yt={class:"card-body"},Zt={key:1,class:"h-[280px] flex items-center justify-center"},es={class:"card"},ts={class:"card-body"},ss={key:0,class:"space-y-4"},as={class:"flex items-center justify-between text-sm mb-1.5"},ns={class:"font-medium text-light-800 dark:text-light-200 truncate max-w-[150px]"},ls={class:"text-light-600 dark:text-light-400 tabular-nums"},rs={class:"h-2 bg-light-200 dark:bg-dark-100 rounded-full overflow-hidden"},os={key:1,class:"h-[200px] flex items-center justify-center text-light-500 text-sm"},is={class:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-5"},us={class:"font-medium text-light-900 dark:text-white"},ds={class:"badge badge-cyber"},cs={class:"badge badge-crown"},gs={class:"font-medium text-light-900 dark:text-white truncate max-w-[180px]"},ms={class:"badge badge-queen"},xs={__name:"Dashboard",setup(a){const n=S(null),p=S([]),w=S([]),v=S(null),P=S(new Date),y=S(!0),x=S(!0),$=S(!0),F=S(!0),f=S("1h"),b=[{label:"1h",value:"1h",minutes:60},{label:"6h",value:"6h",minutes:360},{label:"24h",value:"24h",minutes:1440}],c=()=>{const t=b.find(u=>u.value===f.value)||b[0],s=new Date;return{from:new Date(s.getTime()-t.minutes*60*1e3).toISOString(),to:s.toISOString()}},q=k(()=>p.value.reduce((t,s)=>t+(s.partitions||1),0)),M=k(()=>{var g,u,d;if(!((g=n.value)!=null&&g.throughput))return{current:"0",trend:0};const t=n.value.throughput.ingestedPerSecond||n.value.throughput.processedPerSecond||0;let s=0;if((u=v.value)!=null&&u.throughput&&v.value.throughput.length>=2){const h=v.value.throughput,C=((d=h[0])==null?void 0:d.ingestedPerSecond)||0,_=h.length>5?h.slice(5):h.slice(1),B=_.length>0?_.reduce((E,R)=>E+(R.ingestedPerSecond||0),0)/_.length:0;B>0&&C>0?s=Math.round((C-B)/B*100):B===0&&C>0?s=100:B>0&&C===0&&(s=-100)}return{current:t.toFixed(1),trend:s}}),W=k(()=>{var s;const t=(s=v.value)==null?void 0:s.workers;return!t||t.length===0?0:Math.round(t.reduce((g,u)=>g+(u.avgEventLoopLagMs||0),0)/t.length)}),X=k(()=>{var s;const t=(s=v.value)==null?void 0:s.workers;return!t||t.length===0?0:Math.max(...t.map(g=>g.maxEventLoopLagMs||0))}),U=k(()=>{var s,g,u,d,h;const t=(g=(s=v.value)==null?void 0:s.messages)==null?void 0:g.batchEfficiency;return{push:((u=t==null?void 0:t.push)==null?void 0:u.toFixed(1))||"0",pop:((d=t==null?void 0:t.pop)==null?void 0:d.toFixed(1))||"0",ack:((h=t==null?void 0:t.ack)==null?void 0:h.toFixed(1))||"0"}}),Y=t=>{if(!t||t===0)return"0s";if(t<60)return`${Math.round(t)}s`;if(t<3600){const u=Math.floor(t/60),d=Math.round(t%60);return d>0?`${u}m ${d}s`:`${u}m`}if(t<86400){const u=Math.floor(t/3600),d=Math.floor(t%3600/60);return d>0?`${u}h ${d}m`:`${u}h`}const s=Math.floor(t/86400),g=Math.floor(t%86400/3600);return g>0?`${s}d ${g}h`:`${s}d`},Z=t=>!t||t===0?"text-light-600 dark:text-light-300":t<60?"text-emerald-600 dark:text-emerald-400":t<300?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400",ee=t=>!t||t===0?"text-light-600 dark:text-light-300":t<10?"text-emerald-600 dark:text-emerald-400":t<50?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400",te=t=>!t||t===0?"text-light-600 dark:text-light-300":t<50?"text-emerald-600 dark:text-emerald-400":t<100?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400",je=(t,s)=>s?t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),se=k(()=>{var u;if(!((u=v.value)!=null&&u.throughput)||!Array.isArray(v.value.throughput))return{labels:[],datasets:[]};const t=[...v.value.throughput].reverse();let s=!1;if(t.length>1){const d=new Date(t[0].timestamp),h=new Date(t[t.length-1].timestamp);s=d.toDateString()!==h.toDateString()}return{labels:t.map(d=>{const h=new Date(d.timestamp);return je(h,s)}),datasets:[{label:"In (msg/s)",data:t.map(d=>d.ingestedPerSecond||0),fill:!0},{label:"Out (msg/s)",data:t.map(d=>d.processedPerSecond||0),fill:!0}]}}),De={plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"msg/s",font:{size:11}}}}},I=k(()=>{if(!p.value.length)return[];const t=p.value.reduce((g,u)=>{var C,_;const d=((C=u.messages)==null?void 0:C.pending)||0,h=((_=u.messages)==null?void 0:_.processing)||0;return g+d+h},0),s=["bg-gradient-to-r from-queen-500 to-queen-600","bg-gradient-to-r from-cyber-500 to-cyber-600","bg-gradient-to-r from-crown-500 to-crown-600","bg-gradient-to-r from-emerald-500 to-emerald-600","bg-gradient-to-r from-violet-500 to-violet-600"];return p.value.map((g,u)=>{var _,B;const d=((_=g.messages)==null?void 0:_.pending)||0,h=((B=g.messages)==null?void 0:B.processing)||0,C=d+h;return{name:g.name,count:C,percentage:t>0?C/t*100:0,colorClass:s[u%s.length]}}).sort((g,u)=>u.count-g.count)}),ze=[{key:"name",label:"Queue Name",sortable:!0},{key:"messages.pending",label:"Pending",sortable:!0,align:"right"},{key:"messages.processing",label:"Processing",sortable:!0,align:"right"},{key:"status",label:"Status"}],Pe=[{key:"name",label:"Group Name",sortable:!0},{key:"members",label:"Members",sortable:!0,align:"right"},{key:"totalLag",label:"Lag",sortable:!0,align:"right"}],Ve=k(()=>[...p.value].sort((t,s)=>{var d,h;const g=((d=t.messages)==null?void 0:d.pending)||0;return(((h=s.messages)==null?void 0:h.pending)||0)-g})),Ae=k(()=>[...w.value].sort((t,s)=>{const g=t.totalLag||0;return(s.totalLag||0)-g})),Ne=async()=>{n.value||(y.value=!0);try{const t=await Ke.getOverview();n.value=t.data}catch(t){console.error("Failed to fetch overview:",t)}finally{y.value=!1}},Fe=async()=>{var t;p.value.length||(x.value=!0);try{const s=await Je.list();p.value=((t=s.data)==null?void 0:t.queues)||s.data||[]}catch(s){console.error("Failed to fetch queues:",s)}finally{x.value=!1}},Oe=async()=>{var t;w.value.length||($.value=!0);try{const s=await We.list();w.value=Array.isArray(s.data)?s.data:((t=s.data)==null?void 0:t.consumer_groups)||[]}catch(s){console.error("Failed to fetch consumers:",s)}finally{$.value=!1}},ae=async()=>{v.value||(F.value=!0);try{const t=c(),s=await Xe.getStatus(t);v.value=s.data}catch(t){console.error("Failed to fetch status:",t)}finally{F.value=!1}},G=async()=>{P.value=new Date,await Promise.all([Ne(),Fe(),Oe(),ae()])};Ye(G),Qe(f,()=>{ae()});let K=null;He(()=>{G(),K=setInterval(G,3e4)}),Ue(()=>{K&&clearInterval(K)});function Te(t){return T("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"})])}function Ie(t){return T("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})])}function Ee(t){return T("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})])}return(t,s)=>{var u,d,h,C,_,B,E,R,ne,le,re,oe,ie,ue,de,ce,ge,me,he,ve,fe,pe,xe,be,ke,ye,we,$e,Ce,Se;const g=Ge("router-link");return l(),i("div",Bt,[e("div",Lt,[O(Q,{label:"Total Queues",value:((u=n.value)==null?void 0:u.queues)||0,subtext:`${z(L)(q.value)} partitions`,icon:Te,"icon-color":"queen",loading:y.value,clickable:"",onClick:s[0]||(s[0]=r=>t.$router.push("/queues"))},null,8,["value","subtext","loading"]),O(Q,{label:"Total Messages",value:((h=(d=n.value)==null?void 0:d.messages)==null?void 0:h.total)||0,subtext:`${z(L)(((_=(C=n.value)==null?void 0:C.messages)==null?void 0:_.completed)||0)} completed`,icon:Ie,"icon-color":"cyber",loading:y.value,clickable:"",onClick:s[1]||(s[1]=r=>t.$router.push("/messages"))},null,8,["value","subtext","loading"]),O(Q,{label:"Consumer Groups",value:((B=w.value)==null?void 0:B.length)||0,icon:Ee,"icon-color":"crown",loading:$.value,clickable:"",onClick:s[2]||(s[2]=r=>t.$router.push("/consumers"))},null,8,["value","loading"]),O(Q,{label:"Processing Rate",value:M.value.current,format:"raw",subtext:"messages/sec",trend:M.value.trend,loading:F.value},null,8,["value","trend","loading"])]),e("div",jt,[e("div",Dt,[e("div",zt,[s[6]||(s[6]=e("div",{class:"flex items-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-xs font-medium text-light-500"},"Time Lag")],-1)),e("div",Pt,[e("span",{class:m([Z((ne=(R=(E=n.value)==null?void 0:E.lag)==null?void 0:R.time)==null?void 0:ne.avg),"font-semibold tabular-nums"])},o(Y(((oe=(re=(le=n.value)==null?void 0:le.lag)==null?void 0:re.time)==null?void 0:oe.avg)||0)),3),s[5]||(s[5]=e("span",{class:"text-light-400"},"/",-1)),e("span",{class:m([Z((de=(ue=(ie=n.value)==null?void 0:ie.lag)==null?void 0:ue.time)==null?void 0:de.max),"font-semibold tabular-nums"])},o(Y(((me=(ge=(ce=n.value)==null?void 0:ce.lag)==null?void 0:ge.time)==null?void 0:me.max)||0)),3)])])]),e("div",Vt,[e("div",At,[s[8]||(s[8]=e("div",{class:"flex items-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("span",{class:"text-xs font-medium text-light-500"},"Pending")],-1)),e("div",Nt,[e("span",{class:m([ee((fe=(ve=(he=n.value)==null?void 0:he.lag)==null?void 0:ve.offset)==null?void 0:fe.avg),"font-semibold tabular-nums"])},o(z(L)(((be=(xe=(pe=n.value)==null?void 0:pe.lag)==null?void 0:xe.offset)==null?void 0:be.avg)||0)),3),s[7]||(s[7]=e("span",{class:"text-light-400"},"/",-1)),e("span",{class:m([ee((we=(ye=(ke=n.value)==null?void 0:ke.lag)==null?void 0:ye.offset)==null?void 0:we.max),"font-semibold tabular-nums"])},o(z(L)(((Se=(Ce=($e=n.value)==null?void 0:$e.lag)==null?void 0:Ce.offset)==null?void 0:Se.max)||0)),3)])])]),e("div",Ft,[e("div",Ot,[s[10]||(s[10]=e("div",{class:"flex items-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5 text-rose-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("span",{class:"text-xs font-medium text-light-500"},"Event Loop")],-1)),e("div",Tt,[e("span",{class:m([te(W.value),"font-semibold tabular-nums"])},o(W.value)+"ms ",3),s[9]||(s[9]=e("span",{class:"text-light-400"},"/",-1)),e("span",{class:m([te(X.value),"font-semibold tabular-nums"])},o(X.value)+"ms ",3)])])]),e("div",It,[e("div",Et,[s[11]||(s[11]=e("div",{class:"flex items-center gap-1.5"},[e("svg",{class:"w-3.5 h-3.5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),e("span",{class:"text-xs font-medium text-light-500"},"Batch")],-1)),e("div",Rt,[e("span",Qt,o(U.value.push),1),e("span",Ht,o(U.value.pop),1),e("span",Ut,o(U.value.ack),1)])])])]),e("div",Gt,[e("div",Kt,[e("div",Jt,[s[12]||(s[12]=e("div",null,[e("h3",{class:"font-semibold text-light-900 dark:text-white"},"Throughput"),e("p",{class:"text-xs text-light-500 mt-0.5"},"Messages per second")],-1)),e("div",Wt,[(l(),i(A,null,N(b,r=>e("button",{key:r.value,onClick:D=>f.value=r.value,class:m(["px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-medium rounded-md transition-colors",f.value===r.value?"bg-queen-500 text-white":"text-light-600 dark:text-light-400 hover:bg-light-200 dark:hover:bg-dark-100"])},o(r.label),11,Xt)),64))])]),e("div",Yt,[se.value.labels.length>0?(l(),J(Ze,{key:0,type:"line",data:se.value,options:De,height:"280px"},null,8,["data"])):(l(),i("div",Zt,[...s[13]||(s[13]=[e("div",{class:"text-center text-light-500"},[e("div",{class:"spinner mx-auto mb-3"}),e("p",{class:"text-sm"},"Loading chart data...")],-1)])]))])]),e("div",es,[s[15]||(s[15]=e("div",{class:"card-header"},[e("h3",{class:"font-semibold text-light-900 dark:text-white"},"Queue Distribution"),e("p",{class:"text-xs text-light-500 mt-0.5"},"Pending messages per queue")],-1)),e("div",ts,[I.value.length>0?(l(),i("div",ss,[(l(!0),i(A,null,N(I.value.slice(0,5),r=>(l(),i("div",{key:r.name,class:"group"},[e("div",as,[e("span",ns,o(r.name),1),e("span",ls,o(z(L)(r.count)),1)]),e("div",rs,[e("div",{class:m(["h-full rounded-full transition-all duration-500 group-hover:opacity-80",r.colorClass]),style:Le({width:`${r.percentage}%`})},null,6)])]))),128)),I.value.length>5?(l(),J(g,{key:0,to:"/queues",class:"inline-flex items-center gap-1 text-sm text-queen-600 dark:text-queen-400 hover:underline mt-2"},{default:V(()=>[H(" View all "+o(I.value.length)+" queues ",1),s[14]||(s[14]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1))]),_:1})):j("",!0)])):(l(),i("div",os," No queues found "))])])]),e("div",is,[O(Be,{title:"Active Queues",columns:ze,data:Ve.value,loading:x.value,"page-size":5,clickable:"",onRowClick:s[3]||(s[3]=r=>t.$router.push(`/queues/${r.name}`))},{name:V(({value:r})=>[e("span",us,o(r),1)]),"messages.pending":V(({row:r})=>{var D;return[e("span",ds,o(z(L)(((D=r.messages)==null?void 0:D.pending)||0)),1)]}),"messages.processing":V(({row:r})=>{var D;return[e("span",cs,o(z(L)(((D=r.messages)==null?void 0:D.processing)||0)),1)]}),status:V(({row:r})=>{var D,Me,_e;return[e("span",{class:m(["inline-flex items-center gap-1.5",(((D=r.messages)==null?void 0:D.processing)||0)>0?"text-emerald-600 dark:text-emerald-400":"text-light-500"])},[e("span",{class:m(["w-1.5 h-1.5 rounded-full",(((Me=r.messages)==null?void 0:Me.processing)||0)>0?"bg-emerald-500 animate-pulse":"bg-light-400"])},null,2),H(" "+o((((_e=r.messages)==null?void 0:_e.processing)||0)>0?"Active":"Idle"),1)],2)]}),_:1},8,["data","loading"]),O(Be,{title:"Consumer Groups",columns:Pe,data:Ae.value,loading:$.value,"page-size":5,clickable:"",onRowClick:s[4]||(s[4]=r=>t.$router.push("/consumers"))},{name:V(({value:r})=>[e("span",gs,o(r),1)]),members:V(({value:r})=>[e("span",ms,o(r),1)]),totalLag:V(({value:r})=>[e("span",{class:m(["badge",r>1e3?"badge-danger":r>100?"badge-warning":"badge-success"])},o(z(L)(r||0)),3)]),_:1},8,["data","loading"])])])}}};export{xs as default};
