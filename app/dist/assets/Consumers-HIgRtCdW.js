import{g as n,c as H,w as xt,k as gt,G as mt,a as o,b as t,d as g,t as a,u as m,n as c,j as k,F as A,i as B,A as z,B as I,L as W,C as ct,D as G,x as b,o as r}from"./index-Bh6pUXf_.js";import{f as C,b as Y}from"./useApi-CMkbhU7m.js";import{u as pt}from"./useRefresh-DGHeVgd7.js";const ht={class:"space-y-4 sm:space-y-6 animate-fade-in"},vt={class:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4"},kt={class:"card p-3 sm:p-4"},bt={class:"text-xl sm:text-2xl font-bold font-display text-light-900 dark:text-white mt-1"},ft={class:"card p-3 sm:p-4"},wt={class:"text-xl sm:text-2xl font-bold font-display text-cyber-600 dark:text-cyber-400 mt-1"},yt={class:"card p-3 sm:p-4"},_t={class:"text-xl sm:text-2xl font-bold font-display text-crown-600 dark:text-crown-400 mt-1"},Ct={class:"card p-3 sm:p-4"},Lt={class:"card"},Mt={class:"card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},St={class:"flex items-center gap-2 sm:gap-3"},qt={key:0,class:"badge badge-warning text-[10px] sm:text-xs"},$t={key:0,class:"card-body"},Tt={class:"mb-6"},Nt={class:"mb-3"},jt={class:"text-sm font-medium text-light-700 dark:text-light-300"},Dt={class:"text-queen-600 dark:text-queen-400 font-semibold"},At={class:"flex flex-wrap items-center gap-3"},Bt={class:"flex flex-wrap gap-2"},zt=["onClick"],Ft=["disabled"],Ht={key:0,class:"flex items-center justify-center py-8"},Vt={key:1,class:"overflow-x-auto"},Rt={class:"w-full text-sm"},Ut={class:"px-3 py-2 font-medium text-light-900 dark:text-white"},Gt={class:"px-3 py-2"},Pt={class:"badge badge-queen text-xs"},Qt={class:"px-3 py-2 font-medium text-light-700 dark:text-light-300"},Ot={class:"px-3 py-2"},Et={class:"text-xs px-2 py-0.5 rounded bg-light-200 dark:bg-dark-200 text-light-700 dark:text-light-300"},It={class:"px-3 py-2 text-right font-medium text-amber-600 dark:text-amber-400"},Wt={class:"px-3 py-2 text-right font-medium text-rose-600 dark:text-rose-400"},Yt={class:"px-3 py-2 text-right font-semibold text-light-900 dark:text-white"},Jt={class:"px-3 py-2 text-xs text-light-600 dark:text-light-400"},Kt={key:2,class:"text-center py-8"},Xt={class:"text-sm text-light-500 mt-1"},Zt={class:"card p-3 sm:p-4"},te={class:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-3 sm:gap-4"},ee={class:"w-full sm:flex-1 sm:min-w-[200px] sm:max-w-md"},se={class:"relative"},le={class:"flex items-center justify-between sm:justify-start gap-3 sm:gap-4"},ae={class:"flex items-center gap-2 text-xs sm:text-sm text-light-700 dark:text-light-300"},oe=["disabled"],re={class:"hidden sm:inline"},ne={class:"sm:hidden"},ie={class:"card overflow-hidden"},de={class:"overflow-x-auto"},ue={class:"w-full"},xe={key:0},ge={key:1},me={class:"px-4 py-3"},ce={class:"font-medium text-light-900 dark:text-white"},pe={class:"px-4 py-3"},he={class:"px-4 py-3"},ve={class:"text-sm text-crown-600 dark:text-crown-400"},ke={class:"px-4 py-3 text-right"},be={class:"text-sm font-medium text-cyber-600 dark:text-cyber-400"},fe={class:"px-4 py-3 text-right"},we={class:"px-4 py-3 text-right"},ye={class:"px-4 py-3"},_e={class:"flex items-center justify-center gap-1"},Ce=["onClick"],Le=["onClick"],Me=["onClick"],Se=["onClick"],qe={key:2},$e={class:"card-header flex items-center justify-between"},Te={class:"font-semibold text-light-900 dark:text-white"},Ne={class:"card-body overflow-y-auto max-h-[60vh]"},je={class:"grid grid-cols-3 gap-4 mb-6"},De={class:"p-4 rounded-lg bg-light-100 dark:bg-dark-300 text-center"},Ae={class:"text-2xl font-bold text-cyber-600 dark:text-cyber-400 mt-1"},Be={class:"p-4 rounded-lg bg-light-100 dark:bg-dark-300 text-center"},ze={class:"p-4 rounded-lg bg-light-100 dark:bg-dark-300 text-center"},Fe={class:"text-2xl font-bold text-light-900 dark:text-white mt-1"},He={class:"mb-4"},Ve={class:"p-3 rounded-lg bg-light-100 dark:bg-dark-300"},Re={class:"font-medium text-light-900 dark:text-white"},Ue={key:0},Ge={class:"space-y-2"},Pe={class:"font-medium text-light-900 dark:text-white"},Qe=["onClick"],Oe={class:"text-light-600 dark:text-light-400 mb-4"},Ee={key:0},Ie={class:"text-sm text-light-500 mb-6"},We={class:"flex items-center gap-2 text-sm text-light-700 dark:text-light-300 mb-6"},Ye={class:"flex items-center justify-end gap-3"},Je=["disabled"],Ke={class:"text-light-600 dark:text-light-400 mb-4"},Xe={class:"mb-4"},Ze={class:"flex items-center justify-end gap-3"},ts=["disabled"],os={__name:"Consumers",setup(es){const P=mt(),p=n([]),V=n(!0),L=n(""),R=n(!1),M=n("name"),i=n(null),d=n(null),F=n(!0),x=n(!1),S=n(!1),f=n(null),h=n(""),q=n(!1),v=n([]),$=n(!1),T=n(3600),w=n(!1),J=[{value:60,label:"1m"},{value:300,label:"5m"},{value:600,label:"10m"},{value:1800,label:"30m"},{value:3600,label:"1h"},{value:10800,label:"3h"},{value:21600,label:"6h"},{value:43200,label:"12h"},{value:86400,label:"24h"}],K=s=>s.state==="Lagging"?!0:(s.maxTimeLag||0)>0||(s.totalLag||0)>0,Q=H(()=>{let s=[...p.value];if(L.value){const e=L.value.toLowerCase();s=s.filter(u=>u.name.toLowerCase().includes(e))}return R.value&&(s=s.filter(e=>K(e))),s.sort((e,u)=>{if(M.value==="name")return e.name.localeCompare(u.name);if(M.value==="lag"){const _=(e.maxTimeLag||0)*1e6+(e.totalLag||0);return(u.maxTimeLag||0)*1e6+(u.totalLag||0)-_}else if(M.value==="members")return(u.members||0)-(e.members||0);return 0}),s}),X=H(()=>p.value.reduce((s,e)=>s+(e.members||0),0)),Z=H(()=>p.value.reduce((s,e)=>s+(e.totalLag||0),0)),O=H(()=>p.value.filter(s=>s.state==="Lagging").length),N=s=>s.state||"Unknown",tt=s=>{const e=s.state;return e==="Lagging"?"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400":e==="Dead"?"bg-light-200 dark:bg-dark-200 text-light-600 dark:text-light-400":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400"},et=s=>{const e=s.state;return e==="Lagging"?"bg-rose-500 animate-pulse":e==="Dead"?"bg-light-400":"bg-emerald-500"},y=async()=>{var s;p.value.length||(V.value=!0);try{const e=await b.list();p.value=Array.isArray(e.data)?e.data:((s=e.data)==null?void 0:s.consumer_groups)||[]}catch(e){console.error("Failed to fetch consumers:",e)}finally{V.value=!1}},st=async()=>{w.value=!0;try{await b.refreshStats(),await y()}catch(s){console.error("Failed to hard refresh:",s)}finally{w.value=!1}},lt=s=>{i.value=s},at=s=>{d.value=s},ot=async()=>{if(d.value){x.value=!0;try{d.value.queueName?await b.deleteForQueue(d.value.name,d.value.queueName,F.value):await b.delete(d.value.name,F.value),d.value=null,y()}catch(s){console.error("Failed to delete consumer:",s)}finally{x.value=!1}}},rt=async s=>{if(s.queueName&&confirm(`Move cursor to now for "${s.name}" on queue "${s.queueName}"?

This will skip all pending messages and start consuming from the latest message.`)){x.value=!0;try{await b.seek(s.name,s.queueName,{toEnd:!0}),y()}catch(e){console.error("Failed to move to now:",e)}finally{x.value=!1}}},nt=s=>{f.value=s;const e=new Date(Date.now()-60*60*1e3);h.value=dt(e),S.value=!0},it=async()=>{if(!(!f.value||!h.value)){x.value=!0;try{const s=new Date(h.value).toISOString();await b.seek(f.value.name,f.value.queueName,{timestamp:s}),S.value=!1,h.value="",y()}catch(s){console.error("Failed to seek:",s)}finally{x.value=!1}}},dt=s=>{const e=s.getFullYear(),u=String(s.getMonth()+1).padStart(2,"0"),_=String(s.getDate()).padStart(2,"0"),j=String(s.getHours()).padStart(2,"0"),l=String(s.getMinutes()).padStart(2,"0");return`${e}-${u}-${_}T${j}:${l}`},U=async()=>{$.value=!0;try{const s=await b.getLagging(T.value);v.value=s.data||[]}catch(s){console.error("Failed to load lagging partitions:",s),v.value=[]}finally{$.value=!1}},E=s=>{if(s<3600){const e=Math.round(s/60);return`${e} minute${e!==1?"s":""}`}else if(s<86400){const e=Math.round(s/3600);return`${e} hour${e!==1?"s":""}`}else{const e=Math.round(s/86400);return`${e} day${e!==1?"s":""}`}},ut=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return s}};return xt(q,s=>{s&&v.value.length===0&&U()}),pt(y),gt(()=>{P.query.search&&(L.value=P.query.search),y()}),(s,e)=>{var u,_,j;return r(),o("div",ht,[t("div",vt,[t("div",kt,[e[15]||(e[15]=t("p",{class:"text-[10px] sm:text-xs text-light-500 uppercase tracking-wide"},"Total Groups",-1)),t("p",bt,a(m(C)(p.value.length)),1)]),t("div",ft,[e[16]||(e[16]=t("p",{class:"text-[10px] sm:text-xs text-light-500 uppercase tracking-wide"},"Active Consumers",-1)),t("p",wt,a(m(C)(X.value)),1)]),t("div",yt,[e[17]||(e[17]=t("p",{class:"text-[10px] sm:text-xs text-light-500 uppercase tracking-wide"},"Total Lag",-1)),t("p",_t,a(m(C)(Z.value)),1)]),t("div",Ct,[e[18]||(e[18]=t("p",{class:"text-[10px] sm:text-xs text-light-500 uppercase tracking-wide"},"Lagging Groups",-1)),t("p",{class:c(["text-xl sm:text-2xl font-bold font-display mt-1",O.value>0?"text-rose-600 dark:text-rose-400":"text-emerald-600 dark:text-emerald-400"])},a(O.value),3)])]),t("div",Lt,[t("div",Mt,[t("div",St,[e[19]||(e[19]=t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e[20]||(e[20]=t("h3",{class:"text-sm sm:text-base font-semibold text-light-900 dark:text-white"},"Lagging Partitions",-1)),v.value.length>0?(r(),o("span",qt,a(v.value.length),1)):g("",!0)]),t("button",{onClick:e[0]||(e[0]=l=>q.value=!q.value),class:"btn btn-secondary text-xs sm:text-sm w-full sm:w-auto"},a(q.value?"Hide":"Show"),1)]),q.value?(r(),o("div",$t,[t("div",Tt,[t("div",Nt,[t("label",jt,[e[21]||(e[21]=k(" Minimum Lag Threshold: ",-1)),t("span",Dt,a(E(T.value)),1)])]),t("div",At,[t("div",Bt,[(r(),o(A,null,B(J,l=>t("button",{key:l.value,onClick:D=>{T.value=l.value,U()},class:c(["px-3 py-1.5 text-xs font-medium rounded-lg transition-colors",T.value===l.value?"bg-queen-600 text-white":"bg-light-100 dark:bg-dark-300 text-light-700 dark:text-light-300 hover:bg-light-200 dark:hover:bg-dark-200"])},a(l.label),11,zt)),64))]),t("button",{onClick:U,disabled:$.value,class:"btn btn-cyber text-xs ml-auto"},[e[22]||(e[22]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),k(" "+a($.value?"Loading...":"Refresh"),1)],8,Ft)])]),$.value?(r(),o("div",Ht,[...e[23]||(e[23]=[t("div",{class:"w-6 h-6 border-2 border-queen-500 border-t-transparent rounded-full animate-spin mr-3"},null,-1),t("span",{class:"text-light-500"},"Loading lagging partitions...",-1)])])):v.value.length>0?(r(),o("div",Vt,[t("table",Rt,[e[24]||(e[24]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Consumer Group"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Queue"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Partition"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Worker ID"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Offset Lag"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Time Lag"),t("th",{class:"text-right px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Lag Hours"),t("th",{class:"text-left px-3 py-2 text-xs font-semibold text-light-500 uppercase"},"Oldest Unconsumed")])],-1)),t("tbody",null,[(r(!0),o(A,null,B(v.value,l=>(r(),o("tr",{key:`${l.consumer_group}-${l.queue_name}-${l.partition_name}`,class:"border-b border-light-100 dark:border-dark-100 hover:bg-light-50 dark:hover:bg-dark-300"},[t("td",Ut,a(l.consumer_group),1),t("td",Gt,[t("span",Pt,a(l.queue_name),1)]),t("td",Qt,a(l.partition_name),1),t("td",Ot,[t("code",Et,a(l.worker_id||"N/A"),1)]),t("td",It,a(m(C)(l.offset_lag)),1),t("td",Wt,a(m(Y)(l.time_lag_seconds*1e3)),1),t("td",Yt,a(l.lag_hours)+"h ",1),t("td",Jt,a(ut(l.oldest_unconsumed_at)),1)]))),128))])])])):(r(),o("div",Kt,[e[25]||(e[25]=t("svg",{class:"w-12 h-12 mx-auto text-emerald-500 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[26]||(e[26]=t("p",{class:"font-medium text-light-900 dark:text-white"},"No lagging partitions found",-1)),t("p",Xt,"All partitions are within the "+a(E(T.value))+" threshold",1)]))])):g("",!0)]),t("div",Zt,[t("div",te,[t("div",ee,[t("div",se,[z(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>L.value=l),type:"text",placeholder:"Search consumer groups...",class:"input pl-10"},null,512),[[I,L.value]]),e[27]||(e[27]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1))])]),t("div",le,[t("label",ae,[z(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>R.value=l),type:"checkbox",class:"w-4 h-4 rounded border-light-300 dark:border-dark-50 text-queen-500 focus:ring-queen-500"},null,512),[[W,R.value]]),e[28]||(e[28]=t("span",{class:"hidden sm:inline"},"Show lagging only",-1)),e[29]||(e[29]=t("span",{class:"sm:hidden"},"Lagging only",-1))]),z(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>M.value=l),class:"select w-32 sm:w-40 text-sm"},[...e[30]||(e[30]=[t("option",{value:"name"},"Sort by Name",-1),t("option",{value:"lag"},"Sort by Lag",-1),t("option",{value:"members"},"Sort by Members",-1)])],512),[[ct,M.value]]),t("button",{onClick:st,disabled:w.value,class:"btn btn-secondary text-xs sm:text-sm flex items-center gap-1.5",title:"Force refresh stats from database (fixes stale lag data)"},[(r(),o("svg",{class:c(["w-4 h-4",{"animate-spin":w.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[31]||(e[31]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),t("span",re,a(w.value?"Refreshing...":"Hard Refresh"),1),t("span",ne,a(w.value?"...":"Refresh"),1)],8,oe)])])]),t("div",ie,[t("div",de,[t("table",ue,[e[38]||(e[38]=t("thead",null,[t("tr",{class:"border-b border-light-200 dark:border-dark-50"},[t("th",{class:"text-left px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Group Name "),t("th",{class:"text-left px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Status "),t("th",{class:"text-left px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Queue "),t("th",{class:"text-right px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Members "),t("th",{class:"text-right px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Offset Lag "),t("th",{class:"text-right px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Time Lag "),t("th",{class:"text-center px-4 py-3 text-xs font-semibold text-light-500 uppercase tracking-wide"}," Actions ")])],-1)),V.value?(r(),o("tbody",xe,[(r(),o(A,null,B(5,l=>t("tr",{key:l,class:"border-b border-light-100 dark:border-dark-100"},[...e[32]||(e[32]=[t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-4 w-40"})],-1),t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-5 w-16"})],-1),t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-4 w-24"})],-1),t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-4 w-8 ml-auto"})],-1),t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-4 w-12 ml-auto"})],-1),t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-4 w-16 ml-auto"})],-1),t("td",{class:"px-4 py-3"},[t("div",{class:"skeleton h-4 w-32 mx-auto"})],-1)])])),64))])):Q.value.length>0?(r(),o("tbody",ge,[(r(!0),o(A,null,B(Q.value,l=>(r(),o("tr",{key:`${l.name}-${l.queueName}`,class:"border-b border-light-100 dark:border-dark-100 hover:bg-light-50 dark:hover:bg-dark-300 transition-colors"},[t("td",me,[t("span",ce,a(l.name),1)]),t("td",pe,[t("span",{class:c(["inline-flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full",tt(l)])},[t("span",{class:c(["w-1.5 h-1.5 rounded-full",et(l)])},null,2),k(" "+a(N(l)),1)],2)]),t("td",he,[t("span",ve,a(l.queueName||"-"),1)]),t("td",ke,[t("span",be,a(l.members||0),1)]),t("td",fe,[t("span",{class:c(["text-sm font-medium",(l.totalLag||0)>0?"text-amber-600 dark:text-amber-400":"text-light-600 dark:text-light-400"])},a(m(C)(l.totalLag||0)),3)]),t("td",we,[t("span",{class:c(["text-sm font-medium",(l.maxTimeLag||0)>0?"text-rose-600 dark:text-rose-400":"text-light-600 dark:text-light-400"])},a((l.maxTimeLag||0)>0?m(Y)(l.maxTimeLag*1e3):"-"),3)]),t("td",ye,[t("div",_e,[t("button",{onClick:D=>lt(l),class:"p-1.5 rounded hover:bg-light-200 dark:hover:bg-dark-200 text-light-600 dark:text-light-400 hover:text-queen-600 dark:hover:text-queen-400 transition-colors",title:"View details"},[...e[33]||(e[33]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],8,Ce),l.queueName?(r(),o("button",{key:0,onClick:D=>rt(l),class:"p-1.5 rounded hover:bg-light-200 dark:hover:bg-dark-200 text-light-600 dark:text-light-400 hover:text-cyber-600 dark:hover:text-cyber-400 transition-colors",title:"Move to Now (skip pending)"},[...e[34]||(e[34]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"})],-1)])],8,Le)):g("",!0),l.queueName?(r(),o("button",{key:1,onClick:D=>nt(l),class:"p-1.5 rounded hover:bg-light-200 dark:hover:bg-dark-200 text-light-600 dark:text-light-400 hover:text-crown-600 dark:hover:text-crown-400 transition-colors",title:"Seek to timestamp"},[...e[35]||(e[35]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],8,Me)):g("",!0),t("button",{onClick:D=>at(l),class:"p-1.5 rounded hover:bg-rose-100 dark:hover:bg-rose-900/30 text-light-600 dark:text-light-400 hover:text-rose-600 dark:hover:text-rose-400 transition-colors",title:"Delete consumer group for this queue"},[...e[36]||(e[36]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,Se)])])]))),128))])):(r(),o("tbody",qe,[...e[37]||(e[37]=[t("tr",null,[t("td",{colspan:"7",class:"px-4 py-12 text-center"},[t("svg",{class:"w-12 h-12 mx-auto text-light-400 dark:text-light-600 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]),t("h3",{class:"text-sm font-semibold text-light-900 dark:text-white mb-1"},"No consumer groups found"),t("p",{class:"text-sm text-light-600 dark:text-light-400"}," Consumer groups will appear here when clients connect ")])],-1)])]))])])]),i.value?(r(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-500/50 backdrop-blur-sm",onClick:e[6]||(e[6]=l=>i.value=null)},[t("div",{class:"card w-full max-w-2xl max-h-[80vh] overflow-hidden animate-slide-up",onClick:e[5]||(e[5]=G(()=>{},["stop"]))},[t("div",$e,[t("h3",Te,a(i.value.name),1),t("button",{onClick:e[4]||(e[4]=l=>i.value=null),class:"btn btn-ghost btn-icon"},[...e[39]||(e[39]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Ne,[t("div",je,[t("div",De,[e[40]||(e[40]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Members",-1)),t("p",Ae,a(i.value.members||0),1)]),t("div",Be,[e[41]||(e[41]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"State",-1)),t("p",{class:c(["text-lg font-bold mt-1",{"text-emerald-600 dark:text-emerald-400":N(i.value)==="Stable","text-amber-600 dark:text-amber-400":N(i.value)==="Warning","text-rose-600 dark:text-rose-400":N(i.value)==="Lagging"}])},a(N(i.value)),3)]),t("div",ze,[e[42]||(e[42]=t("p",{class:"text-xs text-light-500 uppercase tracking-wide"},"Lag",-1)),t("p",Fe,a(m(C)(i.value.totalLag||0)),1)])]),t("div",He,[e[43]||(e[43]=t("h4",{class:"text-sm font-medium text-light-700 dark:text-light-300 mb-2"},"Queue",-1)),t("div",Ve,[t("span",Re,a(i.value.queueName||"-"),1)])]),((u=i.value.topics)==null?void 0:u.length)>0?(r(),o("div",Ue,[e[44]||(e[44]=t("h4",{class:"text-sm font-medium text-light-700 dark:text-light-300 mb-3"},"Topics",-1)),t("div",Ge,[(r(!0),o(A,null,B(i.value.topics,l=>(r(),o("div",{key:l,class:"flex items-center justify-between p-3 rounded-lg bg-light-100 dark:bg-dark-300"},[t("span",Pe,a(l),1),t("button",{onClick:D=>s.seekQueue(i.value.name,l),class:"btn btn-ghost text-xs"}," Seek ",8,Qe)]))),128))])])):g("",!0)])])])):g("",!0),d.value?(r(),o("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-500/50 backdrop-blur-sm",onClick:e[10]||(e[10]=l=>d.value=null)},[t("div",{class:"card p-6 w-full max-w-md animate-slide-up",onClick:e[9]||(e[9]=G(()=>{},["stop"]))},[e[49]||(e[49]=t("h3",{class:"text-lg font-semibold text-light-900 dark:text-white mb-2"}," Delete Consumer Group ",-1)),t("p",Oe,[e[46]||(e[46]=k(" Are you sure you want to delete ",-1)),t("strong",null,a(d.value.name),1),d.value.queueName?(r(),o("span",Ee,[e[45]||(e[45]=k(" for queue ",-1)),t("strong",null,a(d.value.queueName),1)])):g("",!0),e[47]||(e[47]=k("? ",-1))]),t("p",Ie," This will remove partition consumer state"+a(d.value.queueName?" for this queue only":"")+". ",1),t("label",We,[z(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>F.value=l),type:"checkbox",class:"w-4 h-4 rounded border-light-300 dark:border-dark-50 text-queen-500 focus:ring-queen-500"},null,512),[[W,F.value]]),e[48]||(e[48]=k(" Also delete subscription metadata ",-1))]),t("div",Ye,[t("button",{onClick:e[8]||(e[8]=l=>d.value=null),class:"btn btn-secondary"}," Cancel "),t("button",{onClick:ot,disabled:x.value,class:"btn bg-rose-600 text-white hover:bg-rose-700"},a(x.value?"Deleting...":"Delete"),9,Je)])])])):g("",!0),S.value?(r(),o("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-500/50 backdrop-blur-sm",onClick:e[14]||(e[14]=l=>S.value=!1)},[t("div",{class:"card p-6 w-full max-w-md animate-slide-up",onClick:e[13]||(e[13]=G(()=>{},["stop"]))},[e[52]||(e[52]=t("h3",{class:"text-lg font-semibold text-light-900 dark:text-white mb-2"}," Seek Cursor Position ",-1)),t("p",Ke,a((_=f.value)==null?void 0:_.name)+" / "+a((j=f.value)==null?void 0:j.queueName),1),t("div",Xe,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-light-700 dark:text-light-300 mb-2"}," Target Timestamp ",-1)),z(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>h.value=l),type:"datetime-local",class:"input"},null,512),[[I,h.value]]),e[51]||(e[51]=t("p",{class:"text-xs text-light-500 mt-2"}," ⚠️ The cursor will move to the last message at or before this timestamp. Messages after this point will be re-consumed. ",-1))]),t("div",Ze,[t("button",{onClick:e[12]||(e[12]=l=>S.value=!1),class:"btn btn-secondary"}," Cancel "),t("button",{onClick:it,disabled:x.value||!h.value,class:"btn btn-primary"},a(x.value?"Seeking...":"Seek to Timestamp"),9,ts)])])])):g("",!0)])}}};export{os as default};
