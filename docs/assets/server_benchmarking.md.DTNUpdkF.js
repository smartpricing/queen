import{_ as a,c as i,o as e,ag as n}from"./chunks/framework.-kPtTt-D.js";const k=JSON.parse('{"title":"Benchmarking","description":"","frontmatter":{},"headers":[],"relativePath":"server/benchmarking.md","filePath":"server/benchmarking.md"}'),t={name:"server/benchmarking.md"};function l(r,s,p,h,d,o){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="benchmarking" tabindex="-1">Benchmarking <a class="header-anchor" href="#benchmarking" aria-label="Permalink to &quot;Benchmarking&quot;">‚Äã</a></h1><p>Learn how to benchmark Queen MQ performance and interpret results.</p><h2 id="benchmark-tool" tabindex="-1">Benchmark Tool <a class="header-anchor" href="#benchmark-tool" aria-label="Permalink to &quot;Benchmark Tool&quot;">‚Äã</a></h2><p>Queen includes a high-performance C++ benchmark utility for measuring throughput and latency.</p><h3 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">‚Äã</a></h3><ul><li>‚úÖ <strong>Producer Mode</strong> - Measure push throughput</li><li>‚úÖ <strong>Consumer Mode</strong> - Measure consume throughput</li><li>‚úÖ <strong>Concurrent Threads</strong> - Scale with multiple workers</li><li>‚úÖ <strong>Single-Queue Mode</strong> - One queue with N partitions</li><li>‚úÖ <strong>Multi-Queue Mode</strong> - N queues with one partition each</li><li>‚úÖ <strong>Client-Side Buffering</strong> - Automatic batching for producers</li><li>‚úÖ <strong>Performance Metrics</strong> - Messages/sec, MB/sec, latency</li></ul><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">‚Äã</a></h2><h3 id="build-the-benchmark-tool" tabindex="-1">Build the Benchmark Tool <a class="header-anchor" href="#build-the-benchmark-tool" aria-label="Permalink to &quot;Build the Benchmark Tool&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> benchmark</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Binary location: <code>bin/benchmark</code></p><h3 id="run-producer-benchmark" tabindex="-1">Run Producer Benchmark <a class="header-anchor" href="#run-producer-benchmark" aria-label="Permalink to &quot;Run Producer Benchmark&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Single queue with 4 partitions, 4 threads, 100K messages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="run-consumer-benchmark" tabindex="-1">Run Consumer Benchmark <a class="header-anchor" href="#run-consumer-benchmark" aria-label="Permalink to &quot;Run Consumer Benchmark&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Consume from same setup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">‚Äã</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>./bin/benchmark &lt;mode&gt; [options]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="modes" tabindex="-1">Modes <a class="header-anchor" href="#modes" aria-label="Permalink to &quot;Modes&quot;">‚Äã</a></h3><ul><li><code>producer</code> - Push messages to queues</li><li><code>consumer</code> - Consume messages from queues</li></ul><h3 id="options" tabindex="-1">Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;Options&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th>Option</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>--threads N</code></td><td>Number of concurrent threads</td><td>1</td></tr><tr><td><code>--server URL</code></td><td>Server URL</td><td><code>http://localhost:6632</code></td></tr><tr><td><code>--batch N</code></td><td>Batch size</td><td>100</td></tr><tr><td><code>--count N</code></td><td>Total messages (producer only)</td><td>10000</td></tr><tr><td><code>--partitions N</code></td><td>Number of partitions/queues</td><td>4</td></tr><tr><td><code>--mode MODE</code></td><td>Queue mode: single-queue or multi-queue</td><td>single-queue</td></tr></tbody></table><h2 id="queue-modes" tabindex="-1">Queue Modes <a class="header-anchor" href="#queue-modes" aria-label="Permalink to &quot;Queue Modes&quot;">‚Äã</a></h2><h3 id="single-queue-mode" tabindex="-1">Single-Queue Mode <a class="header-anchor" href="#single-queue-mode" aria-label="Permalink to &quot;Single-Queue Mode&quot;">‚Äã</a></h3><p><strong>Setup:</strong></p><ul><li>Creates <strong>one queue</strong> (<code>benchmark-queue</code>)</li><li>Each thread targets a <strong>different partition</strong></li><li>Example: 4 threads ‚Üí 4 partitions (partition-0, partition-1, partition-2, partition-3)</li></ul><p><strong>Use case:</strong> Test partition-based parallelism</p><p><strong>Example:</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Producer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Consumer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="multi-queue-mode" tabindex="-1">Multi-Queue Mode <a class="header-anchor" href="#multi-queue-mode" aria-label="Permalink to &quot;Multi-Queue Mode&quot;">‚Äã</a></h3><p><strong>Setup:</strong></p><ul><li>Creates <strong>N queues</strong> (benchmark-queue-0, benchmark-queue-1, ...)</li><li>Each thread targets a <strong>different queue</strong></li><li>Each queue has one default partition</li></ul><p><strong>Use case:</strong> Test multi-queue parallelism</p><p><strong>Example:</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Producer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multi-queue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Consumer  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multi-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="example-scenarios" tabindex="-1">Example Scenarios <a class="header-anchor" href="#example-scenarios" aria-label="Permalink to &quot;Example Scenarios&quot;">‚Äã</a></h2><h3 id="scenario-1-high-throughput-producer" tabindex="-1">Scenario 1: High-Throughput Producer <a class="header-anchor" href="#scenario-1-high-throughput-producer" aria-label="Permalink to &quot;Scenario 1: High-Throughput Producer&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 8 threads pushing 1M messages with large batches</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Expected output:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>========================================</span></span>
<span class="line"><span>Benchmark Results</span></span>
<span class="line"><span>========================================</span></span>
<span class="line"><span>Total Messages:     1000000</span></span>
<span class="line"><span>Total Bytes:        300000000</span></span>
<span class="line"><span>Errors:             0</span></span>
<span class="line"><span>Elapsed Time:       5.23 seconds</span></span>
<span class="line"><span>Throughput:         191205 msg/sec</span></span>
<span class="line"><span>Bandwidth:          54.58 MB/sec</span></span>
<span class="line"><span>========================================</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="scenario-2-multi-consumer-performance" tabindex="-1">Scenario 2: Multi-Consumer Performance <a class="header-anchor" href="#scenario-2-multi-consumer-performance" aria-label="Permalink to &quot;Scenario 2: Multi-Consumer Performance&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 16 consumers across 16 queues</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multi-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="scenario-3-partition-based-load" tabindex="-1">Scenario 3: Partition-Based Load <a class="header-anchor" href="#scenario-3-partition-based-load" aria-label="Permalink to &quot;Scenario 3: Partition-Based Load&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Single queue, 4 partitions, heavy load</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Then consume with same config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="performance-tips" tabindex="-1">Performance Tips <a class="header-anchor" href="#performance-tips" aria-label="Permalink to &quot;Performance Tips&quot;">‚Äã</a></h2><h3 id="for-maximum-throughput" tabindex="-1">For Maximum Throughput <a class="header-anchor" href="#for-maximum-throughput" aria-label="Permalink to &quot;For Maximum Throughput&quot;">‚Äã</a></h3><ol><li><p><strong>Increase batch size</strong> - Larger batches = fewer HTTP requests</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>Use more threads</strong> - Match your CPU core count</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>Client-side buffering</strong> - Producer automatically uses buffering</p><ul><li>Buffer triggers at batch size or 100ms timeout</li></ul></li><li><p><strong>Multi-queue mode</strong> - Better parallelism for independent streams</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multi-queue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h3 id="for-latency-testing" tabindex="-1">For Latency Testing <a class="header-anchor" href="#for-latency-testing" aria-label="Permalink to &quot;For Latency Testing&quot;">‚Äã</a></h3><ol><li><p><strong>Smaller batches</strong> - Reduce buffering delay</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>Single-queue mode</strong> - Simpler setup</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h2 id="interpreting-results" tabindex="-1">Interpreting Results <a class="header-anchor" href="#interpreting-results" aria-label="Permalink to &quot;Interpreting Results&quot;">‚Äã</a></h2><h3 id="producer-results" tabindex="-1">Producer Results <a class="header-anchor" href="#producer-results" aria-label="Permalink to &quot;Producer Results&quot;">‚Äã</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Total Messages:     100000</span></span>
<span class="line"><span>Total Bytes:        30000000</span></span>
<span class="line"><span>Elapsed Time:       2.34 seconds</span></span>
<span class="line"><span>Throughput:         42735 msg/sec</span></span>
<span class="line"><span>Bandwidth:          12.21 MB/sec</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>Throughput</strong> - Messages per second produced</li><li><strong>Bandwidth</strong> - Data throughput in MB/sec</li><li>Higher is better</li></ul><h3 id="consumer-results" tabindex="-1">Consumer Results <a class="header-anchor" href="#consumer-results" aria-label="Permalink to &quot;Consumer Results&quot;">‚Äã</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Total Messages:     100000</span></span>
<span class="line"><span>Total Bytes:        30000000</span></span>
<span class="line"><span>Elapsed Time:       3.12 seconds</span></span>
<span class="line"><span>Throughput:         32051 msg/sec</span></span>
<span class="line"><span>Bandwidth:          9.15 MB/sec</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>Throughput</strong> - Messages per second consumed</li><li><strong>Bandwidth</strong> - Data throughput in MB/sec</li><li>Consumer typically slower due to ACK overhead</li></ul><h2 id="workflow" tabindex="-1">Workflow <a class="header-anchor" href="#workflow" aria-label="Permalink to &quot;Workflow&quot;">‚Äã</a></h2><h3 id="complete-producer-‚Üí-consumer-test" tabindex="-1">Complete Producer ‚Üí Consumer Test <a class="header-anchor" href="#complete-producer-‚Üí-consumer-test" aria-label="Permalink to &quot;Complete Producer ‚Üí Consumer Test&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Terminal 1: Start producer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Terminal 2: Start consumer (simultaneously or after)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consumer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="advanced-usage" tabindex="-1">Advanced Usage <a class="header-anchor" href="#advanced-usage" aria-label="Permalink to &quot;Advanced Usage&quot;">‚Äã</a></h2><h3 id="custom-server" tabindex="-1">Custom Server <a class="header-anchor" href="#custom-server" aria-label="Permalink to &quot;Custom Server&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://my-server:6632</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="high-concurrency-test" tabindex="-1">High Concurrency Test <a class="header-anchor" href="#high-concurrency-test" aria-label="Permalink to &quot;High Concurrency Test&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 32 threads, 32 partitions</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="stress-test" tabindex="-1">Stress Test <a class="header-anchor" href="#stress-test" aria-label="Permalink to &quot;Stress Test&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Push 10 million messages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> producer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --threads</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10000000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --partitions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multi-queue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="performance-expectations" tabindex="-1">Performance Expectations <a class="header-anchor" href="#performance-expectations" aria-label="Permalink to &quot;Performance Expectations&quot;">‚Äã</a></h2><p>Typical results on modern hardware:</p><ul><li><strong>Producer:</strong> 50K - 200K msg/sec (depending on config)</li><li><strong>Consumer:</strong> 30K - 150K msg/sec (slower due to ACK)</li><li><strong>Single message:</strong> ~100-300 bytes (with overhead)</li></ul><p>Actual performance depends on:</p><ul><li>CPU cores</li><li>Network latency</li><li>Server configuration</li><li>Batch size</li><li>Thread count</li></ul><h3 id="official-benchmark-results" tabindex="-1">Official Benchmark Results <a class="header-anchor" href="#official-benchmark-results" aria-label="Permalink to &quot;Official Benchmark Results&quot;">‚Äã</a></h3><p>From C++ client benchmark (Apple M4 Air, all components on same machine):</p><table tabindex="0"><thead><tr><th>Test</th><th>Mode</th><th>Messages</th><th>Batch</th><th>Throughput</th><th>Bandwidth</th></tr></thead><tbody><tr><td><strong>T1</strong></td><td>Producer</td><td>10,000</td><td>1</td><td>785 msg/sec</td><td>0.22 MB/sec</td></tr><tr><td><strong>T1</strong></td><td>Consumer</td><td>10,000</td><td>1</td><td>456 msg/sec</td><td>0.23 MB/sec</td></tr><tr><td><strong>T2</strong></td><td>Producer</td><td>10,000</td><td>10</td><td>7,677 msg/sec</td><td>2.20 MB/sec</td></tr><tr><td><strong>T2</strong></td><td>Consumer</td><td>10,000</td><td>10</td><td>4,989 msg/sec</td><td>2.53 MB/sec</td></tr><tr><td><strong>T3</strong></td><td>Producer</td><td>10,000</td><td>100</td><td>39,065 msg/sec</td><td>11.18 MB/sec</td></tr><tr><td><strong>T3</strong></td><td>Consumer</td><td>10,000</td><td>100</td><td>30,079 msg/sec</td><td>15.26 MB/sec</td></tr><tr><td><strong>T4</strong></td><td>Producer</td><td>10,000</td><td>1,000</td><td>85,862 msg/sec</td><td>24.57 MB/sec</td></tr><tr><td><strong>T4</strong></td><td>Consumer</td><td>10,000</td><td>1,000</td><td><strong>488,650 msg/sec</strong></td><td><strong>247.87 MB/sec</strong></td></tr><tr><td><strong>T5</strong></td><td>Producer</td><td>100,000</td><td>1,000</td><td><strong>90,601 msg/sec</strong></td><td><strong>25.92 MB/sec</strong></td></tr><tr><td><strong>T5</strong></td><td>Consumer</td><td>100,000</td><td>1,000</td><td>84,530 msg/sec</td><td>42.96 MB/sec</td></tr></tbody></table><p><strong>Key Observations:</strong></p><ul><li>‚úÖ <strong>Batch size matters:</strong> Larger batches (1,000) dramatically improve throughput</li><li>‚úÖ <strong>Consumer performance:</strong> Peaks at 488K msg/sec with batch size 1,000</li><li>‚úÖ <strong>Producer peak:</strong> 90K msg/sec with batch size 1,000 on 100K messages</li><li>‚ö†Ô∏è <strong>Small batches:</strong> Performance drops significantly with batch=1</li><li>üìà <strong>Scalability:</strong> Performance improves with larger message volumes</li></ul><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">‚Äã</a></h2><h3 id="connection-refused" tabindex="-1">Connection Refused <a class="header-anchor" href="#connection-refused" aria-label="Permalink to &quot;Connection Refused&quot;">‚Äã</a></h3><p><strong>Problem:</strong> Server not running<br><strong>Solution:</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/queen-server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="low-throughput" tabindex="-1">Low Throughput <a class="header-anchor" href="#low-throughput" aria-label="Permalink to &quot;Low Throughput&quot;">‚Äã</a></h3><p><strong>Try:</strong></p><ul><li>Increase <code>--batch</code> size</li><li>Increase <code>--threads</code> count</li><li>Use <code>--mode multi-queue</code> for better parallelism</li><li>Check server resources (CPU, memory)</li><li>Verify database performance</li></ul><h3 id="build-errors" tabindex="-1">Build Errors <a class="header-anchor" href="#build-errors" aria-label="Permalink to &quot;Build Errors&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> benchmark</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Make sure you have:</p><ul><li>C++17 compiler</li><li>cpp-httplib installed</li><li>nlohmann/json available</li></ul><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">‚Äã</a></h2><ul><li>Producer uses <strong>client-side buffering</strong> for performance</li><li>Consumer uses <strong>long polling</strong> with 5-second idle timeout</li><li>Each thread processes messages independently</li><li>Statistics are thread-safe (atomic counters)</li><li>Optimized with <code>-O3 -march=native</code> for maximum performance</li></ul><h2 id="benchmark-your-configuration" tabindex="-1">Benchmark Your Configuration <a class="header-anchor" href="#benchmark-your-configuration" aria-label="Permalink to &quot;Benchmark Your Configuration&quot;">‚Äã</a></h2><p>To benchmark your specific Queen deployment:</p><ol><li><strong>Baseline Test</strong> - Start with default settings</li><li><strong>Tune Server</strong> - Adjust <code>DB_POOL_SIZE</code>, <code>NUM_WORKERS</code></li><li><strong>Tune Clients</strong> - Adjust thread count and batch size</li><li><strong>Measure</strong> - Run benchmarks and record results</li><li><strong>Optimize</strong> - Make incremental changes</li><li><strong>Repeat</strong> - Measure again and compare</li></ol><p>Keep a benchmark journal:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Date: 2025-11-13</span></span>
<span class="line"><span>Config: DB_POOL_SIZE=150, NUM_WORKERS=10</span></span>
<span class="line"><span>Producer: 85K msg/sec (batch=1000, threads=8)</span></span>
<span class="line"><span>Consumer: 42K msg/sec (batch=100, threads=8)</span></span>
<span class="line"><span>Notes: Baseline with default configuration</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">‚Äã</a></h2><ul><li><a href="/queen/server/tuning.html">Performance Tuning</a> - Optimize server performance</li><li><a href="/queen/server/configuration.html">Server Configuration</a> - Configure the server</li><li><a href="/queen/server/environment-variables.html">Environment Variables</a> - Complete variable reference</li><li><a href="/queen/server/benchmarks.html">Benchmarks</a> - Official benchmark results</li></ul>`,94)])])}const u=a(t,[["render",l]]);export{k as __pageData,u as default};
