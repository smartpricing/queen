import{_ as a,c as n,o as e,ag as i}from"./chunks/framework.-kPtTt-D.js";const c=JSON.parse('{"title":"Comparison with Other Message Queues","description":"","frontmatter":{},"headers":[],"relativePath":"guide/comparison.md","filePath":"guide/comparison.md"}'),t={name:"guide/comparison.md"};function r(l,s,p,o,h,d){return e(),n("div",null,[...s[0]||(s[0]=[i(`<h1 id="comparison-with-other-message-queues" tabindex="-1">Comparison with Other Message Queues <a class="header-anchor" href="#comparison-with-other-message-queues" aria-label="Permalink to &quot;Comparison with Other Message Queues&quot;">​</a></h1><p>How Queen MQ compares to RabbitMQ, Kafka, NATS, and Redis Streams.</p><h2 id="why-another-message-queue" tabindex="-1">Why Another Message Queue? <a class="header-anchor" href="#why-another-message-queue" aria-label="Permalink to &quot;Why Another Message Queue?&quot;">​</a></h2><p>Queen was born from real production needs at <a href="https://www.linkedin.com/company/smartness-com/" target="_blank" rel="noreferrer">Smartness</a> to power <a href="https://www.smartness.com/en/guest-messaging" target="_blank" rel="noreferrer"><strong>Smartchat</strong></a> - an AI-powered guest messaging platform for hospitality.</p><h3 id="the-problem-we-faced" tabindex="-1">The Problem We Faced <a class="header-anchor" href="#the-problem-we-faced" aria-label="Permalink to &quot;The Problem We Faced&quot;">​</a></h3><p>We use Kafka extensively and know it well. For Smartchat&#39;s message backbone, we initially chose Kafka for its strong reliability guarantees.</p><p>However, we encountered a use case mismatch: <strong>in Kafka, a single message processing delay affects the entire partition</strong>. For most workloads this isn&#39;t an issue, but our system involves:</p><ul><li><strong>AI translations</strong> - Can take seconds/minutes</li><li><strong>Agent responses</strong> - Can take seconds/minutes</li><li><strong>Variable processing times</strong> - Inherent to the domain</li></ul><p>With potentially 100,000+ concurrent chats, we would need a Kafka partition for each chat conversation - which isn&#39;t practical at that scale.</p><h3 id="the-solution" tabindex="-1">The Solution <a class="header-anchor" href="#the-solution" aria-label="Permalink to &quot;The Solution&quot;">​</a></h3><p>Queen provides <strong>unlimited FIFO partitions</strong> where slow processing in one partition doesn&#39;t affect others. This architectural difference makes it ideal for:</p><ul><li>Chat systems with variable response times</li><li>AI processing pipelines with unpredictable latency</li><li>Human-in-the-loop workflows</li><li>Any system with inherently variable message processing</li></ul><h2 id="conceptual-mapping" tabindex="-1">Conceptual Mapping <a class="header-anchor" href="#conceptual-mapping" aria-label="Permalink to &quot;Conceptual Mapping&quot;">​</a></h2><p>How Queen concepts map to other systems:</p><table tabindex="0"><thead><tr><th>Queen Concept</th><th>RabbitMQ</th><th>Kafka</th><th>NATS (JetStream)</th><th>Redis Streams</th></tr></thead><tbody><tr><td><strong>Queue</strong></td><td>Queue</td><td>Topic</td><td>Stream</td><td>Stream</td></tr><tr><td><strong>Partition</strong></td><td>N/A*</td><td>Partition</td><td>N/A</td><td>Consumer Group</td></tr><tr><td><strong>Consumer Group</strong></td><td>Competing Consumers</td><td>Consumer Group</td><td>Queue Group</td><td>Consumer Group</td></tr><tr><td><strong>Queue Mode</strong></td><td>Exclusive consumer</td><td>N/A**</td><td>Single subscriber</td><td>Single consumer</td></tr><tr><td><strong>Lease</strong></td><td>Message TTL / Visibility</td><td>N/A***</td><td>Ack wait / nak delay</td><td>N/A</td></tr><tr><td><strong>Ack/Nack</strong></td><td>Ack/Nack</td><td>Commit offset</td><td>Ack/Nak</td><td>XACK</td></tr><tr><td><strong>Transaction</strong></td><td>Publisher confirms + acks</td><td>Transactional API</td><td>N/A</td><td>MULTI/EXEC</td></tr><tr><td><strong>Dead Letter Queue</strong></td><td>Dead Letter Exchange</td><td>Manual****</td><td>Manual</td><td>Manual</td></tr></tbody></table><h2 id="feature-comparison" tabindex="-1">Feature Comparison <a class="header-anchor" href="#feature-comparison" aria-label="Permalink to &quot;Feature Comparison&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th>Queen</th><th>RabbitMQ</th><th>Kafka</th><th>NATS</th><th>Redis Streams</th></tr></thead><tbody><tr><td><strong>FIFO Partitions</strong></td><td>✅ Unlimited</td><td>❌</td><td>✅ Limited</td><td>❌</td><td>✅ Limited</td></tr><tr><td><strong>Consumer Groups</strong></td><td>✅ Built-in</td><td>⚠️ Manual setup</td><td>✅ Built-in</td><td>✅ Built-in</td><td>✅ Built-in</td></tr><tr><td><strong>Transactions</strong></td><td>✅ Atomic push+ack</td><td>⚠️ Complex</td><td>⚠️ Limited scope</td><td>❌</td><td>⚠️ Basic MULTI</td></tr><tr><td><strong>Long Polling</strong></td><td>✅ Native</td><td>✅ Native</td><td>❌</td><td>✅ Native</td><td>✅ XREAD BLOCK</td></tr><tr><td><strong>Dead Letter Queue</strong></td><td>✅ Automatic</td><td>✅ Via DLX</td><td>⚠️ Manual</td><td>⚠️ Manual</td><td>❌</td></tr><tr><td><strong>Message Replay</strong></td><td>✅ By timestamp</td><td>❌</td><td>✅ By offset</td><td>✅ By time/seq</td><td>✅ By ID</td></tr><tr><td><strong>Persistence</strong></td><td>✅ PostgreSQL</td><td>✅ Disk</td><td>✅ Disk</td><td>✅ Disk/Memory</td><td>⚠️ Memory-first</td></tr><tr><td><strong>Exactly-Once</strong></td><td>✅ Native</td><td>⚠️ Complex</td><td>⚠️ Complex</td><td>❌</td><td>❌</td></tr><tr><td><strong>Web Dashboard</strong></td><td>✅ Modern Vue.js</td><td>⚠️ Basic</td><td>⚠️ External tools</td><td>❌</td><td>❌</td></tr><tr><td><strong>Query Language</strong></td><td>✅ SQL</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>Encryption</strong></td><td>✅ Per-queue</td><td>✅ TLS</td><td>✅ TLS</td><td>✅ TLS</td><td>✅ TLS</td></tr><tr><td><strong>Message Tracing</strong></td><td>✅ Built-in</td><td>⚠️ Plugins</td><td>⚠️ External</td><td>❌</td><td>❌</td></tr></tbody></table><h2 id="deep-dive-comparisons" tabindex="-1">Deep Dive Comparisons <a class="header-anchor" href="#deep-dive-comparisons" aria-label="Permalink to &quot;Deep Dive Comparisons&quot;">​</a></h2><h3 id="vs-rabbitmq" tabindex="-1">vs RabbitMQ <a class="header-anchor" href="#vs-rabbitmq" aria-label="Permalink to &quot;vs RabbitMQ&quot;">​</a></h3><p><strong>When to use Queen over RabbitMQ:</strong></p><p><strong>Need unlimited partitions</strong> - RabbitMQ queues don&#39;t support internal partitioning<br><strong>Want PostgreSQL integration</strong> - Leverage existing DB infrastructure<br><strong>Complex workflows</strong> - Native transaction support for push+ack<br><strong>SQL queries</strong> - Query messages and metadata with SQL<br><strong>Modern dashboard</strong> - Built-in Vue.js web interface</p><p><strong>When to use RabbitMQ over Queen:</strong></p><p><strong>Need routing complexity</strong> - Exchanges, bindings, routing keys<br><strong>AMQP ecosystem</strong> - Extensive tooling and client libraries<br><strong>Mature feature set</strong> - Decades of production hardening<br><strong>No PostgreSQL dependency</strong> - Standalone message broker</p><h3 id="vs-kafka" tabindex="-1">vs Kafka <a class="header-anchor" href="#vs-kafka" aria-label="Permalink to &quot;vs Kafka&quot;">​</a></h3><p><strong>When to use Queen over Kafka:</strong></p><p><strong>Variable processing times</strong> - One slow message doesn&#39;t block partition<br><strong>Need unlimited partitions</strong> - Don&#39;t hit Kafka&#39;s partition limits<br><strong>Simpler operations</strong> - No ZooKeeper/KRaft to manage<br><strong>SQL integration</strong> - Direct database access<br><strong>Smaller scale</strong> - Easier to operate for smaller deployments</p><p><strong>When to use Kafka over Queen:</strong></p><p><strong>Multi-datacenter replication</strong> - Kafka&#39;s replication is battle-tested<br><strong>Stream processing</strong> - Kafka Streams ecosystem<br><strong>Massive scale</strong> - Proven at trillion-message scale<br><strong>Log compaction</strong> - Advanced retention strategies<br><strong>Ecosystem</strong> - Connectors, Schema Registry, ksqlDB</p><p><strong>Architecture Difference:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Kafka:</span></span>
<span class="line"><span>┌─────────────┐</span></span>
<span class="line"><span>│ Topic       │</span></span>
<span class="line"><span>│  Partition 0│ ← Consumer 1 (processes ALL messages in P0)</span></span>
<span class="line"><span>│  Partition 1│ ← Consumer 2 (processes ALL messages in P1)</span></span>
<span class="line"><span>│  Partition 2│ ← Consumer 3 (processes ALL messages in P2)</span></span>
<span class="line"><span>└─────────────┘</span></span>
<span class="line"><span>Problem: Slow message in P0 blocks entire partition</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Queen:</span></span>
<span class="line"><span>┌─────────────┐</span></span>
<span class="line"><span>│ Queue       │</span></span>
<span class="line"><span>│  Part chat-1│ ← Consumer 1 (ONLY chat-1 messages)</span></span>
<span class="line"><span>│  Part chat-2│ ← Consumer 2 (ONLY chat-2 messages)</span></span>
<span class="line"><span>│  Part chat-3│ ← Consumer 3 (ONLY chat-3 messages)</span></span>
<span class="line"><span>│  Part...    │ ← Consumer N (N can be unlimited)</span></span>
<span class="line"><span>└─────────────┘</span></span>
<span class="line"><span>Solution: Slow message in chat-1 doesn&#39;t affect chat-2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="vs-nats-jetstream" tabindex="-1">vs NATS / JetStream <a class="header-anchor" href="#vs-nats-jetstream" aria-label="Permalink to &quot;vs NATS / JetStream&quot;">​</a></h3><p><strong>When to use Queen over NATS:</strong></p><p><strong>Need consumer groups</strong> - More advanced than queue groups<br><strong>Complex workflows</strong> - Transaction support<br><strong>PostgreSQL integration</strong> - Direct SQL access<br><strong>Message replay</strong> - Flexible timestamp-based replay<br><strong>Dead letter queue</strong> - Automatic failure handling</p><p><strong>When to use NATS over Queen:</strong></p><p><strong>Low latency critical</strong> - NATS is extremely fast<br><strong>Pub/sub patterns</strong> - NATS excels at pub/sub<br><strong>Lightweight</strong> - Minimal resource footprint<br><strong>At-most-once delivery</strong> - Fire-and-forget patterns</p><h3 id="vs-redis-streams" tabindex="-1">vs Redis Streams <a class="header-anchor" href="#vs-redis-streams" aria-label="Permalink to &quot;vs Redis Streams&quot;">​</a></h3><p><strong>When to use Queen over Redis:</strong></p><p><strong>Durability requirements</strong> - PostgreSQL ACID guarantees<br><strong>Complex queries</strong> - SQL over messages<br><strong>Large messages</strong> - No memory constraints<br><strong>Automatic DLQ</strong> - Built-in failure handling<br><strong>Transaction support</strong> - Atomic push+ack</p><p><strong>When to use Redis over Queen:</strong></p><p><strong>Ultra-low latency</strong> - In-memory performance<br><strong>Already using Redis</strong> - Leverage existing infrastructure<br><strong>Simple use cases</strong> - Minimal setup<br><strong>High throughput</strong> - Memory-speed operations</p><h2 id="when-to-choose-queen" tabindex="-1">When to Choose Queen <a class="header-anchor" href="#when-to-choose-queen" aria-label="Permalink to &quot;When to Choose Queen&quot;">​</a></h2><h3 id="perfect-use-cases" tabindex="-1">Perfect Use Cases <a class="header-anchor" href="#perfect-use-cases" aria-label="Permalink to &quot;Perfect Use Cases&quot;">​</a></h3><h4 id="_1-chat-systems" tabindex="-1">1. Chat Systems <a class="header-anchor" href="#_1-chat-systems" aria-label="Permalink to &quot;1. Chat Systems&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Variable response times (AI, agents, users)**</span></span>
<span class="line"><span>Need per-conversation ordering**</span></span>
<span class="line"><span>100K+ concurrent conversations**</span></span>
<span class="line"><span>Message history and replay**</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-ai-processing-pipelines" tabindex="-1">2. AI Processing Pipelines <a class="header-anchor" href="#_2-ai-processing-pipelines" aria-label="Permalink to &quot;2. AI Processing Pipelines&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Unpredictable processing times</span></span>
<span class="line"><span>Need per-document/per-user queues</span></span>
<span class="line"><span>Workflow orchestration</span></span>
<span class="line"><span>Failure tracking and retry</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-human-in-the-loop-workflows" tabindex="-1">3. Human-in-the-Loop Workflows <a class="header-anchor" href="#_3-human-in-the-loop-workflows" aria-label="Permalink to &quot;3. Human-in-the-Loop Workflows&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Variable human response times</span></span>
<span class="line"><span>Task routing and prioritization</span></span>
<span class="line"><span>Audit trail requirements</span></span>
<span class="line"><span>PostgreSQL integration for workflow state</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4-event-driven-microservices" tabindex="-1">4. Event-Driven Microservices <a class="header-anchor" href="#_4-event-driven-microservices" aria-label="Permalink to &quot;4. Event-Driven Microservices&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Transaction guarantees</span></span>
<span class="line"><span>Message tracing across services</span></span>
<span class="line"><span>Dead letter queue handling</span></span>
<span class="line"><span>SQL queries for debugging</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="not-ideal-for" tabindex="-1">Not Ideal For <a class="header-anchor" href="#not-ideal-for" aria-label="Permalink to &quot;Not Ideal For&quot;">​</a></h3><p><strong>Ultra-high throughput</strong> (&gt;1M msg/s) - Use Kafka<br><strong>Ultra-low latency</strong> (&lt;1ms) - Use NATS<br><strong>Multi-datacenter replication</strong> - Use Kafka<br><strong>Complex routing patterns</strong> - Use RabbitMQ<br><strong>In-memory only</strong> - Use Redis</p><h2 id="migration-guides" tabindex="-1">Migration Guides <a class="header-anchor" href="#migration-guides" aria-label="Permalink to &quot;Migration Guides&quot;">​</a></h2><h3 id="from-kafka" tabindex="-1">From Kafka <a class="header-anchor" href="#from-kafka" aria-label="Permalink to &quot;From Kafka&quot;">​</a></h3><p><strong>Concept mapping:</strong></p><ul><li>Kafka Topic → Queen Queue</li><li>Kafka Partition → Queen Partition (but unlimited)</li><li>Kafka Consumer Group → Queen Consumer Group</li><li>Kafka Offset → Queen Consumer Position</li></ul><p><strong>Code example:</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Kafka</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> kafka.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ groupId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-group&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ topic: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-topic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  eachMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Queen equivalent</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> queen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-queue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-group&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="from-rabbitmq" tabindex="-1">From RabbitMQ <a class="header-anchor" href="#from-rabbitmq" aria-label="Permalink to &quot;From RabbitMQ&quot;">​</a></h3><p><strong>Concept mapping:</strong></p><ul><li>RabbitMQ Queue → Queen Queue</li><li>RabbitMQ Consumer → Queen Consumer</li><li>RabbitMQ Dead Letter Exchange → Queen DLQ</li><li>RabbitMQ TTL → Queen Lease Time</li></ul><p><strong>Code example:</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// RabbitMQ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-queue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg.content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Queen equivalent</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> queen.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-queue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.data)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Auto-ack on success</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="from-nats" tabindex="-1">From NATS <a class="header-anchor" href="#from-nats" aria-label="Permalink to &quot;From NATS&quot;">​</a></h3><p><strong>Concept mapping:</strong></p><ul><li>NATS Subject → Queen Queue</li><li>NATS Queue Group → Queen Consumer Group</li><li>NATS Stream → Queen Queue with Consumer Groups</li></ul><p><strong>Code example:</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NATS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">js.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-subject&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  queue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-queue-group&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Queen equivalent</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> queen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-subject&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-queue-group&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="architecture-philosophy" tabindex="-1">Architecture Philosophy <a class="header-anchor" href="#architecture-philosophy" aria-label="Permalink to &quot;Architecture Philosophy&quot;">​</a></h2><h3 id="queen-s-design-principles" tabindex="-1">Queen&#39;s Design Principles <a class="header-anchor" href="#queen-s-design-principles" aria-label="Permalink to &quot;Queen&#39;s Design Principles&quot;">​</a></h3><ol><li><strong>Dumbness</strong> - Dumb clients and servers over HTTP</li><li><strong>PostgreSQL-First</strong> - Leverage database ACID guarantees</li><li><strong>Unlimited Partitions</strong> - No artificial limits</li><li><strong>Developer-Friendly</strong> - SQL queries, modern dashboard</li><li><strong>Operational Simplicity</strong> - No complex clustering</li><li><strong>Zero Message Loss</strong> - Automatic failover to disk</li></ol><h3 id="trade-offs" tabindex="-1">Trade-offs <a class="header-anchor" href="#trade-offs" aria-label="Permalink to &quot;Trade-offs&quot;">​</a></h3><p><strong>What we optimized for:</strong></p><ul><li>Ease of operation</li><li>Developer experience</li><li>PostgreSQL integration</li><li>Variable processing times</li><li>Unlimited partitions</li></ul><p><strong>What we traded off:</strong></p><ul><li>Raw throughput (vs Kafka)</li><li>Ultra-low latency (vs NATS)</li><li>Multi-DC replication (vs Kafka)</li></ul><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>Choose Queen when you need:</p><ul><li><strong>Unlimited FIFO partitions</strong> with independent processing</li><li><strong>PostgreSQL integration</strong> for your infrastructure</li><li><strong>Variable processing times</strong> that would block Kafka partitions</li><li><strong>Simple operations</strong> without clustering complexity</li><li><strong>Modern tooling</strong> (SQL queries, web dashboard, tracing)</li></ul><p>Queen is production-ready and processing millions of messages daily at Smartness.</p><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="/queen/guide/quickstart.html">Quick Start</a> - Get started with Queen</li><li><a href="/queen/guide/concepts.html">Concepts</a> - Understand core concepts</li><li><a href="/queen/guide/introduction.html#why-we-built-queen-mq">Why Queen MQ</a> - Origin story</li></ul>`,82)])])}const g=a(t,[["render",r]]);export{c as __pageData,g as default};
